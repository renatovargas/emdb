<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>news – MAFAP EMDB</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MAFAP EMDB</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../download.html"> 
<span class="menu-text">Download</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../documentation/index.html"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#version-1.8-21" id="toc-version-1.8-21" class="nav-link active" data-scroll-target="#version-1.8-21">version 1.8-21</a>
  <ul class="collapse">
  <li><a href="#bug-fixes" id="toc-bug-fixes" class="nav-link" data-scroll-target="#bug-fixes">bug fixes</a></li>
  <li><a href="#enhancements" id="toc-enhancements" class="nav-link" data-scroll-target="#enhancements">enhancements</a></li>
  <li><a href="#new" id="toc-new" class="nav-link" data-scroll-target="#new">new</a></li>
  </ul></li>
  <li><a href="#version-1.8-15" id="toc-version-1.8-15" class="nav-link" data-scroll-target="#version-1.8-15">version 1.8-15</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-1" id="toc-bug-fixes-1" class="nav-link" data-scroll-target="#bug-fixes-1">bug fixes</a></li>
  <li><a href="#enhancements-1" id="toc-enhancements-1" class="nav-link" data-scroll-target="#enhancements-1">enhancements</a></li>
  </ul></li>
  <li><a href="#version-1.8-10" id="toc-version-1.8-10" class="nav-link" data-scroll-target="#version-1.8-10">version 1.8-10</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-2" id="toc-bug-fixes-2" class="nav-link" data-scroll-target="#bug-fixes-2">bug fixes</a></li>
  <li><a href="#enhancements-2" id="toc-enhancements-2" class="nav-link" data-scroll-target="#enhancements-2">enhancements</a></li>
  <li><a href="#new-1" id="toc-new-1" class="nav-link" data-scroll-target="#new-1">new</a></li>
  </ul></li>
  <li><a href="#version-1.8-5" id="toc-version-1.8-5" class="nav-link" data-scroll-target="#version-1.8-5">version 1.8-5</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-3" id="toc-bug-fixes-3" class="nav-link" data-scroll-target="#bug-fixes-3">bug fixes</a></li>
  <li><a href="#enhancements-3" id="toc-enhancements-3" class="nav-link" data-scroll-target="#enhancements-3">enhancements</a></li>
  <li><a href="#new-2" id="toc-new-2" class="nav-link" data-scroll-target="#new-2">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-83" id="toc-version-1.7-83" class="nav-link" data-scroll-target="#version-1.7-83">version 1.7-83</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-4" id="toc-bug-fixes-4" class="nav-link" data-scroll-target="#bug-fixes-4">bug fixes</a></li>
  <li><a href="#enhancements-4" id="toc-enhancements-4" class="nav-link" data-scroll-target="#enhancements-4">enhancements</a></li>
  <li><a href="#new-3" id="toc-new-3" class="nav-link" data-scroll-target="#new-3">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-78" id="toc-version-1.7-78" class="nav-link" data-scroll-target="#version-1.7-78">version 1.7-78</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-5" id="toc-bug-fixes-5" class="nav-link" data-scroll-target="#bug-fixes-5">bug fixes</a></li>
  <li><a href="#enhancements-5" id="toc-enhancements-5" class="nav-link" data-scroll-target="#enhancements-5">enhancements</a></li>
  <li><a href="#new-4" id="toc-new-4" class="nav-link" data-scroll-target="#new-4">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-71" id="toc-version-1.7-71" class="nav-link" data-scroll-target="#version-1.7-71">version 1.7-71</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-6" id="toc-bug-fixes-6" class="nav-link" data-scroll-target="#bug-fixes-6">bug fixes</a></li>
  <li><a href="#enhancements-6" id="toc-enhancements-6" class="nav-link" data-scroll-target="#enhancements-6">enhancements</a></li>
  <li><a href="#new-5" id="toc-new-5" class="nav-link" data-scroll-target="#new-5">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-65" id="toc-version-1.7-65" class="nav-link" data-scroll-target="#version-1.7-65">version 1.7-65</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-7" id="toc-bug-fixes-7" class="nav-link" data-scroll-target="#bug-fixes-7">bug fixes</a></li>
  <li><a href="#enhancements-7" id="toc-enhancements-7" class="nav-link" data-scroll-target="#enhancements-7">enhancements</a></li>
  <li><a href="#new-6" id="toc-new-6" class="nav-link" data-scroll-target="#new-6">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-55" id="toc-version-1.7-55" class="nav-link" data-scroll-target="#version-1.7-55">version 1.7-55</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-8" id="toc-bug-fixes-8" class="nav-link" data-scroll-target="#bug-fixes-8">bug fixes</a></li>
  <li><a href="#enhancements-8" id="toc-enhancements-8" class="nav-link" data-scroll-target="#enhancements-8">enhancements</a></li>
  <li><a href="#new-7" id="toc-new-7" class="nav-link" data-scroll-target="#new-7">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-46" id="toc-version-1.7-46" class="nav-link" data-scroll-target="#version-1.7-46">version 1.7-46</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-9" id="toc-bug-fixes-9" class="nav-link" data-scroll-target="#bug-fixes-9">bug fixes</a></li>
  <li><a href="#enhancements-9" id="toc-enhancements-9" class="nav-link" data-scroll-target="#enhancements-9">enhancements</a></li>
  <li><a href="#new-8" id="toc-new-8" class="nav-link" data-scroll-target="#new-8">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-39" id="toc-version-1.7-39" class="nav-link" data-scroll-target="#version-1.7-39">version 1.7-39</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-10" id="toc-bug-fixes-10" class="nav-link" data-scroll-target="#bug-fixes-10">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.7-37" id="toc-version-1.7-37" class="nav-link" data-scroll-target="#version-1.7-37">version 1.7-37</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-11" id="toc-bug-fixes-11" class="nav-link" data-scroll-target="#bug-fixes-11">bug fixes</a></li>
  <li><a href="#enhancements-10" id="toc-enhancements-10" class="nav-link" data-scroll-target="#enhancements-10">enhancements</a></li>
  <li><a href="#new-9" id="toc-new-9" class="nav-link" data-scroll-target="#new-9">new</a></li>
  </ul></li>
  <li><a href="#version-1.7-29" id="toc-version-1.7-29" class="nav-link" data-scroll-target="#version-1.7-29">version 1.7-29</a>
  <ul class="collapse">
  <li><a href="#new-10" id="toc-new-10" class="nav-link" data-scroll-target="#new-10">new</a></li>
  <li><a href="#enhancements-11" id="toc-enhancements-11" class="nav-link" data-scroll-target="#enhancements-11">enhancements</a></li>
  <li><a href="#bug-fixes-12" id="toc-bug-fixes-12" class="nav-link" data-scroll-target="#bug-fixes-12">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.7-23" id="toc-version-1.7-23" class="nav-link" data-scroll-target="#version-1.7-23">version 1.7-23</a>
  <ul class="collapse">
  <li><a href="#new-11" id="toc-new-11" class="nav-link" data-scroll-target="#new-11">new</a></li>
  <li><a href="#enhancements-12" id="toc-enhancements-12" class="nav-link" data-scroll-target="#enhancements-12">enhancements</a></li>
  <li><a href="#bug-fixes-13" id="toc-bug-fixes-13" class="nav-link" data-scroll-target="#bug-fixes-13">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.7-18" id="toc-version-1.7-18" class="nav-link" data-scroll-target="#version-1.7-18">version 1.7-18</a>
  <ul class="collapse">
  <li><a href="#new-12" id="toc-new-12" class="nav-link" data-scroll-target="#new-12">new</a></li>
  <li><a href="#enhancements-13" id="toc-enhancements-13" class="nav-link" data-scroll-target="#enhancements-13">enhancements</a></li>
  <li><a href="#bug-fixes-14" id="toc-bug-fixes-14" class="nav-link" data-scroll-target="#bug-fixes-14">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.7-3" id="toc-version-1.7-3" class="nav-link" data-scroll-target="#version-1.7-3">version 1.7-3</a>
  <ul class="collapse">
  <li><a href="#new-13" id="toc-new-13" class="nav-link" data-scroll-target="#new-13">new</a></li>
  <li><a href="#bug-fixes-15" id="toc-bug-fixes-15" class="nav-link" data-scroll-target="#bug-fixes-15">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.6-53" id="toc-version-1.6-53" class="nav-link" data-scroll-target="#version-1.6-53">version 1.6-53</a>
  <ul class="collapse">
  <li><a href="#new-14" id="toc-new-14" class="nav-link" data-scroll-target="#new-14">new</a></li>
  <li><a href="#enhancements-14" id="toc-enhancements-14" class="nav-link" data-scroll-target="#enhancements-14">enhancements</a></li>
  <li><a href="#bug-fixes-16" id="toc-bug-fixes-16" class="nav-link" data-scroll-target="#bug-fixes-16">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.6-47" id="toc-version-1.6-47" class="nav-link" data-scroll-target="#version-1.6-47">version 1.6-47</a>
  <ul class="collapse">
  <li><a href="#new-15" id="toc-new-15" class="nav-link" data-scroll-target="#new-15">new</a></li>
  <li><a href="#enhancements-15" id="toc-enhancements-15" class="nav-link" data-scroll-target="#enhancements-15">enhancements</a></li>
  <li><a href="#bug-fixes-17" id="toc-bug-fixes-17" class="nav-link" data-scroll-target="#bug-fixes-17">bug fixes</a></li>
  <li><a href="#name-changes" id="toc-name-changes" class="nav-link" data-scroll-target="#name-changes">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.6-41" id="toc-version-1.6-41" class="nav-link" data-scroll-target="#version-1.6-41">version 1.6-41</a>
  <ul class="collapse">
  <li><a href="#new-16" id="toc-new-16" class="nav-link" data-scroll-target="#new-16">new</a></li>
  <li><a href="#enhancements-16" id="toc-enhancements-16" class="nav-link" data-scroll-target="#enhancements-16">enhancements</a></li>
  <li><a href="#bug-fixes-18" id="toc-bug-fixes-18" class="nav-link" data-scroll-target="#bug-fixes-18">bug fixes</a></li>
  <li><a href="#name-changes-1" id="toc-name-changes-1" class="nav-link" data-scroll-target="#name-changes-1">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.6-17" id="toc-version-1.6-17" class="nav-link" data-scroll-target="#version-1.6-17">version 1.6-17</a>
  <ul class="collapse">
  <li><a href="#new-17" id="toc-new-17" class="nav-link" data-scroll-target="#new-17">new</a></li>
  <li><a href="#enhancements-17" id="toc-enhancements-17" class="nav-link" data-scroll-target="#enhancements-17">enhancements</a></li>
  <li><a href="#bug-fixes-19" id="toc-bug-fixes-19" class="nav-link" data-scroll-target="#bug-fixes-19">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.6-7" id="toc-version-1.6-7" class="nav-link" data-scroll-target="#version-1.6-7">version 1.6-7</a>
  <ul class="collapse">
  <li><a href="#new-18" id="toc-new-18" class="nav-link" data-scroll-target="#new-18">new</a></li>
  <li><a href="#enhancements-18" id="toc-enhancements-18" class="nav-link" data-scroll-target="#enhancements-18">enhancements</a></li>
  <li><a href="#bug-fixes-20" id="toc-bug-fixes-20" class="nav-link" data-scroll-target="#bug-fixes-20">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.6-3" id="toc-version-1.6-3" class="nav-link" data-scroll-target="#version-1.6-3">version 1.6-3</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-21" id="toc-bug-fixes-21" class="nav-link" data-scroll-target="#bug-fixes-21">bug fixes</a></li>
  <li><a href="#enhancements-19" id="toc-enhancements-19" class="nav-link" data-scroll-target="#enhancements-19">enhancements</a></li>
  <li><a href="#new-19" id="toc-new-19" class="nav-link" data-scroll-target="#new-19">new</a></li>
  </ul></li>
  <li><a href="#version-1.5-34" id="toc-version-1.5-34" class="nav-link" data-scroll-target="#version-1.5-34">version 1.5-34</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-22" id="toc-bug-fixes-22" class="nav-link" data-scroll-target="#bug-fixes-22">bug fixes</a></li>
  <li><a href="#enhancements-20" id="toc-enhancements-20" class="nav-link" data-scroll-target="#enhancements-20">enhancements</a></li>
  <li><a href="#new-20" id="toc-new-20" class="nav-link" data-scroll-target="#new-20">new</a></li>
  <li><a href="#name-changes-2" id="toc-name-changes-2" class="nav-link" data-scroll-target="#name-changes-2">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.5-21" id="toc-version-1.5-21" class="nav-link" data-scroll-target="#version-1.5-21">version 1.5-21</a>
  <ul class="collapse">
  <li><a href="#enhancements-21" id="toc-enhancements-21" class="nav-link" data-scroll-target="#enhancements-21">enhancements</a></li>
  </ul></li>
  <li><a href="#version-1.5-17" id="toc-version-1.5-17" class="nav-link" data-scroll-target="#version-1.5-17">version 1.5-17</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-23" id="toc-bug-fixes-23" class="nav-link" data-scroll-target="#bug-fixes-23">bug fixes</a></li>
  <li><a href="#enhancements-22" id="toc-enhancements-22" class="nav-link" data-scroll-target="#enhancements-22">enhancements</a></li>
  <li><a href="#new-21" id="toc-new-21" class="nav-link" data-scroll-target="#new-21">new</a></li>
  <li><a href="#name-changes-3" id="toc-name-changes-3" class="nav-link" data-scroll-target="#name-changes-3">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.5-12" id="toc-version-1.5-12" class="nav-link" data-scroll-target="#version-1.5-12">version 1.5-12</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-24" id="toc-bug-fixes-24" class="nav-link" data-scroll-target="#bug-fixes-24">bug fixes</a></li>
  <li><a href="#enhancements-23" id="toc-enhancements-23" class="nav-link" data-scroll-target="#enhancements-23">enhancements</a></li>
  <li><a href="#new-22" id="toc-new-22" class="nav-link" data-scroll-target="#new-22">new</a></li>
  </ul></li>
  <li><a href="#version-1.4-22" id="toc-version-1.4-22" class="nav-link" data-scroll-target="#version-1.4-22">version 1.4-22</a>
  <ul class="collapse">
  <li><a href="#changes" id="toc-changes" class="nav-link" data-scroll-target="#changes">changes</a></li>
  <li><a href="#bug-fixes-25" id="toc-bug-fixes-25" class="nav-link" data-scroll-target="#bug-fixes-25">bug fixes</a></li>
  <li><a href="#enhancements-24" id="toc-enhancements-24" class="nav-link" data-scroll-target="#enhancements-24">enhancements</a></li>
  <li><a href="#new-23" id="toc-new-23" class="nav-link" data-scroll-target="#new-23">new</a></li>
  </ul></li>
  <li><a href="#version-1.4-20" id="toc-version-1.4-20" class="nav-link" data-scroll-target="#version-1.4-20">version 1.4-20</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-26" id="toc-bug-fixes-26" class="nav-link" data-scroll-target="#bug-fixes-26">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.4-19" id="toc-version-1.4-19" class="nav-link" data-scroll-target="#version-1.4-19">version 1.4-19</a>
  <ul class="collapse">
  <li><a href="#bug-fixes-27" id="toc-bug-fixes-27" class="nav-link" data-scroll-target="#bug-fixes-27">bug fixes</a></li>
  <li><a href="#new-24" id="toc-new-24" class="nav-link" data-scroll-target="#new-24">new</a></li>
  <li><a href="#enhancements-25" id="toc-enhancements-25" class="nav-link" data-scroll-target="#enhancements-25">enhancements</a></li>
  </ul></li>
  <li><a href="#version-1.4-11" id="toc-version-1.4-11" class="nav-link" data-scroll-target="#version-1.4-11">version 1.4-11</a>
  <ul class="collapse">
  <li><a href="#enhancements-26" id="toc-enhancements-26" class="nav-link" data-scroll-target="#enhancements-26">enhancements</a></li>
  </ul></li>
  <li><a href="#version-1.4-9" id="toc-version-1.4-9" class="nav-link" data-scroll-target="#version-1.4-9">version 1.4-9</a>
  <ul class="collapse">
  <li><a href="#name-changes-4" id="toc-name-changes-4" class="nav-link" data-scroll-target="#name-changes-4">name changes</a></li>
  <li><a href="#enhancements-27" id="toc-enhancements-27" class="nav-link" data-scroll-target="#enhancements-27">enhancements</a></li>
  <li><a href="#bug-fixes-28" id="toc-bug-fixes-28" class="nav-link" data-scroll-target="#bug-fixes-28">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.4-7" id="toc-version-1.4-7" class="nav-link" data-scroll-target="#version-1.4-7">version 1.4-7</a>
  <ul class="collapse">
  <li><a href="#note" id="toc-note" class="nav-link" data-scroll-target="#note">note</a></li>
  <li><a href="#enhancements-28" id="toc-enhancements-28" class="nav-link" data-scroll-target="#enhancements-28">enhancements</a></li>
  <li><a href="#bug-fixes-29" id="toc-bug-fixes-29" class="nav-link" data-scroll-target="#bug-fixes-29">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.3-22" id="toc-version-1.3-22" class="nav-link" data-scroll-target="#version-1.3-22">version 1.3-22</a>
  <ul class="collapse">
  <li><a href="#enhancements-29" id="toc-enhancements-29" class="nav-link" data-scroll-target="#enhancements-29">enhancements</a></li>
  <li><a href="#bug-fixes-30" id="toc-bug-fixes-30" class="nav-link" data-scroll-target="#bug-fixes-30">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.3-4" id="toc-version-1.3-4" class="nav-link" data-scroll-target="#version-1.3-4">version 1.3-4</a>
  <ul class="collapse">
  <li><a href="#new-25" id="toc-new-25" class="nav-link" data-scroll-target="#new-25">new</a></li>
  <li><a href="#enhancements-30" id="toc-enhancements-30" class="nav-link" data-scroll-target="#enhancements-30">enhancements</a></li>
  <li><a href="#bug-fixes-31" id="toc-bug-fixes-31" class="nav-link" data-scroll-target="#bug-fixes-31">bug fixes</a></li>
  </ul></li>
  <li><a href="#version-1.2-10" id="toc-version-1.2-10" class="nav-link" data-scroll-target="#version-1.2-10">version 1.2-10</a>
  <ul class="collapse">
  <li><a href="#new-26" id="toc-new-26" class="nav-link" data-scroll-target="#new-26">new</a></li>
  <li><a href="#enhancements-31" id="toc-enhancements-31" class="nav-link" data-scroll-target="#enhancements-31">enhancements</a></li>
  <li><a href="#bug-fixes-32" id="toc-bug-fixes-32" class="nav-link" data-scroll-target="#bug-fixes-32">bug fixes</a></li>
  <li><a href="#name-changes-5" id="toc-name-changes-5" class="nav-link" data-scroll-target="#name-changes-5">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.2-5" id="toc-version-1.2-5" class="nav-link" data-scroll-target="#version-1.2-5">version 1.2-5</a>
  <ul class="collapse">
  <li><a href="#new-27" id="toc-new-27" class="nav-link" data-scroll-target="#new-27">new</a></li>
  <li><a href="#bug-fixes-33" id="toc-bug-fixes-33" class="nav-link" data-scroll-target="#bug-fixes-33">bug fixes</a></li>
  <li><a href="#name-changes-6" id="toc-name-changes-6" class="nav-link" data-scroll-target="#name-changes-6">name changes</a></li>
  </ul></li>
  <li><a href="#version-1.1-17" id="toc-version-1.1-17" class="nav-link" data-scroll-target="#version-1.1-17">version 1.1-17</a>
  <ul class="collapse">
  <li><a href="#major-changes" id="toc-major-changes" class="nav-link" data-scroll-target="#major-changes">major changes</a></li>
  </ul></li>
  <li><a href="#version-1.1-4" id="toc-version-1.1-4" class="nav-link" data-scroll-target="#version-1.1-4">version 1.1-4</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/renatovargas/gears/blob/master/sf/terra/NEWS.md" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="version-1.8-21" class="level1">
<h1>version 1.8-21</h1>
<section id="bug-fixes" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes">bug fixes</h2>
<ul>
<li><code>sieve</code> failed with large rasters <a href="https://github.com/rspatial/terra/issues/1729">#1729</a> by Reed Humphrey</li>
<li><code>extractRange</code> only worked for SpatVector, not for matrix or vector <a href="https://github.com/rspatial/terra/issues/1733">#1733</a> by Victor Van der Meersch</li>
<li><code>extract&lt;SpatRaster&gt;</code> over https with a multilayer SpatRaster returned the values for the first layer for all layer <a href="https://github.com/rspatial/terra/issues/1736">#1736</a> by Shannon Albeke</li>
</ul>
</section>
<section id="enhancements" class="level2">
<h2 class="anchored" data-anchor-id="enhancements">enhancements</h2>
<ul>
<li>new argument xyz=“” to the <code>rast&lt;SpatVector&gt;</code> method</li>
<li>new arguments “type” and “breaks” to <code>plet&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1187">#1187</a> by Augustin Lobo</li>
<li>new argument “cores” in <code>lapp&lt;SpatRasterDataset&gt;</code> <a href="https://github.com/rspatial/terra/issues/1190">#1190</a> by kel44</li>
<li><code>aggregate&lt;SpatRaster&gt;</code> now handles <code>fun="table"</code> <a href="https://github.com/rspatial/terra/issues/1662">#1662</a> by Fernando Aramburu.</li>
</ul>
</section>
<section id="new" class="level2">
<h2 class="anchored" data-anchor-id="new">new</h2>
<ul>
<li><code>is.flipped&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1627">#1627</a>&gt;` by Timothée Giraud</li>
<li><code>as.array&lt;SpatRasterDataset&gt;</code> method</li>
<li><code>distance&lt;SpatRaster,missing&gt;</code> now has argument “values”. If TRUE, the values of the nearest non-target cell is returned instead of the distance <a href="https://github.com/rspatial/terra/issues/1243">#1243</a> by Simon Dedman</li>
<li><code>thresh&lt;SpatRaster&gt;</code> <a href="https://github.com/rspatial/terra/issues/1233">#1233</a> by Agustin Lobo</li>
</ul>
</section>
</section>
<section id="version-1.8-15" class="level1">
<h1>version 1.8-15</h1>
<p>Released 2025-01-24</p>
<section id="bug-fixes-1" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-1">bug fixes</h2>
<ul>
<li><code>readRDS</code> failed for rasters with timestep=“seconds” <a href="https://github.com/rspatial/terra/issues/1711">#1711</a> by Pascal Oettli</li>
<li><code>divide&lt;SpatVector&gt;</code> always returned NULL <a href="https://github.com/rspatial/terra/issues/1724">#1724</a> by Márcia Barbosa</li>
<li><code>erase</code> failed in some cases <a href="https://github.com/rspatial/terra/issues/1710">#1710</a> by erkent-carb</li>
</ul>
</section>
<section id="enhancements-1" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-1">enhancements</h2>
<ul>
<li><code>bestMatch</code> now has argument “fun” to allow the use of different distance measures, and a <matrix> method</matrix></li>
<li><code>wrap</code> (and <code>writeRDS</code>) now captures varnames/longnames <a href="https://github.com/rspatial/terra/issues/1719">#1719</a> by Andrew Gene Brown</li>
<li>improved raster metadata writing <a href="https://github.com/rspatial/terra/pull/1714">#1714</a> by Andrew Gene Brown</li>
<li><code>vect</code> and <code>writeVector</code> now properly read and write date and datetime data. <a href="https://github.com/rspatial/terra/issues/1718">#1718</a> by Andrew Gene Brown</li>
<li>improved estimate of available memory on linux systems <a href="https://github.com/rspatial/terra/issues/1506">#1506</a> by Cedric Rossi</li>
</ul>
</section>
</section>
<section id="version-1.8-10" class="level1">
<h1>version 1.8-10</h1>
<p>Released 2025-01-13</p>
<section id="bug-fixes-2" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-2">bug fixes</h2>
<ul>
<li><code>expanse&lt;SpatRaster&gt;(transform=TRUE)</code> crashed R when the crs was “local”. <a href="https://github.com/rspatial/terra/issues/1671">#1671</a> by Michael Chirico</li>
<li><code>patches(values=TRUE)</code> wrapped around the edges <a href="https://github.com/rspatial/terra/issues/1675">#1675</a> by Michael Chirico</li>
<li><code>spin</code> now correctly handles spherical coordinates <a href="https://github.com/rspatial/terra/issues/1576">#1576</a> by jeanlobry</li>
<li><code>mosaic</code> sometimes crashed R <a href="https://github.com/rspatial/terra/issues/1524">#1524</a> by John Baums, Dave Klinges, and Hugh Graham.</li>
<li><code>spatSample</code> ignored argument “exp” when taking a random sample with na.rm=TRUE on a large raster <a href="https://github.com/rspatial/terra/issues/1437">#1437</a> by Babak Naimi</li>
<li><code>split&lt;SpatVector,SpatVector&gt;</code> did not work properly <a href="https://github.com/rspatial/terra/issues/1619">#1619</a> by Michael Sumner</li>
<li><code>autocor</code> improved handling of NA cells for global Moran computation <a href="https://github.com/rspatial/terra/issues/1592">#1992</a> by Nicholas Berryman</li>
<li><code>shade</code> is more memory-safe. <a href="https://github.com/rspatial/terra/issues/1452">#1452</a> by Francis van Oordt and Chris English</li>
<li>fixed bug in <code>rasterize</code> revealed when using <code>crop(mask=TRUE)</code> <a href="https://github.com/rspatial/terra/issues/1686">#1686</a> by edixon1</li>
<li>fixed <code>to_id = NA</code> bug in <code>nearest</code> <a href="https://github.com/rspatial/terra/issues/1471">#1471</a> by Mats Blomqvist</li>
<li>better handling of date/unit <a href="https://github.com/rspatial/terra/issues/1684">#1684</a> and <a href="https://github.com/rspatial/terra/issues/1688">#1688</a> by Andrew Gene Brown</li>
<li><code>spatSample(method="regular")</code> on a raster with one column returned too many samples <a href="https://github.com/rspatial/terra/issues/1362">#1362</a> by Daniel R Schlaepfer</li>
</ul>
</section>
<section id="enhancements-2" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-2">enhancements</h2>
<ul>
<li><code>plot&lt;SpatVector&gt;</code> now uses the same default viridis color palette as <code>plot&lt;SpatRaster&gt;</code> <a href="https://github.com/rspatial/terra/issues/1670">#1670</a> by Márcia Barbosa</li>
<li><code>relate</code> now accepts relation=“equals” <a href="https://github.com/rspatial/terra/issues/1672">#1672</a> by Krzysztof Dyba</li>
<li><code>init</code> now accepts additional arguments for function “fun”</li>
<li>better handling of the 32 connections limitation set by the HDF4 library <a href="https://github.com/rspatial/terra/issues/1481">#1481</a> by Dimitri Falk</li>
<li>When using RStudio a once per session warning is given when using draw, sel or click <a href="https://github.com/rspatial/terra/issues/1063">#1063</a> by Sergei Kharchenko</li>
<li><code>distance&lt;SpatRaster&gt;</code> from lon and lat lines/polygons computes distance to the edges instead of the nodes <a href="https://github.com/rspatial/terra/issues/1462">#1462</a> by Derek Friend</li>
<li><code>distance&lt;SpatVector,SpatVector&gt;</code> now works for lon/lat data <a href="https://github.com/rspatial/terra/issues/1615">#1615</a> by Wencheng Lau-Medrano</li>
<li>using overviews for faster plotting of COGs over http <a href="https://github.com/rspatial/terra/issues/1353">#1353</a> by Michael Sumner and <a href="https://github.com/rspatial/terra/issues/1412">#1412</a>; and argument <code>plot(x, overview=)</code> to change the default behavior.</li>
<li><code>extract</code> with points is now faster for rasters accessed over http <a href="https://github.com/rspatial/terra/issues/1504">#1504</a> by Krzysztof Dyba</li>
<li><code>extract</code> with many points on very large rasters was slower in compared to doing the same with “raster” (which uses terra for that!) <a href="https://github.com/rspatial/terra/issues/1584">#1584</a> by Hassan Masoomi</li>
<li><code>merge</code> now has three alternative algorithms <a href="https://github.com/rspatial/terra/issues/1366">1366</a> by Hassan Masoomi and <a href="https://github.com/rspatial/terra/issues/1650">#1650</a> by Agustin Lobo</li>
</ul>
</section>
<section id="new-1" class="level2">
<h2 class="anchored" data-anchor-id="new-1">new</h2>
<ul>
<li><code>$&lt;SpatRaster&gt;</code> can now be used to get a categorical SpatRaster with a different active category</li>
<li><code>scale_linear&lt;SpatRaster&gt;</code> method for linear scaling of cell values between a minimum and maximum value such as 0 and 1</li>
<li><code>distance</code> and related methods get argument “method” to choose the distance algorithm for lon/lat data <a href="https://github.com/rspatial/terra/issues/1677">#1677</a> by Márcia Barbosa</li>
<li><code>divide&lt;SpatRaster&gt;</code> and <code>divide&lt;SpatVector&gt;</code> methods</li>
<li><code>nseg</code> counts the number of segments in a SpatVector <a href="https://github.com/rspatial/terra/pull/1674">#1647</a> by Michael Chirico</li>
<li><code>extract</code> argument “search_radius” to extract values from the nearest raster cell that is not <code>NA</code> <a href="https://github.com/rspatial/terra/issues/873">#873</a> by matthewseanmarcus</li>
<li><code>combineLevels</code> to combine the levels of all layers <a href="https://stackoverflow.com/questions/79340152/how-to-set-factor-levels-in-a-rast-stack-using-terra-when-different-levels-exi">link</a> on SO by Sam</li>
</ul>
</section>
</section>
<section id="version-1.8-5" class="level1">
<h1>version 1.8-5</h1>
<p>Released 2024-12-12</p>
<section id="bug-fixes-3" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-3">bug fixes</h2>
<ul>
<li><code>spatSample(method='stratified', ext=e)</code> returned the wrong sampling coordinates <a href="https://github.com/rspatial/terra/issues/1628">#1628</a> by Barnabas Harris</li>
<li><code>spatSample(method='stratified')</code> could fail with small sample sizes <a href="https://github.com/rspatial/terra/issues/1503">#1503</a> by karluf</li>
<li>transparency (alpha) did not work with RGB plotting. <a href="https://github.com/rspatial/terra/issues/1642">#1642</a> by Timothée Giraud</li>
<li>rasterization failed on very large rasters <a href="https://github.com/rspatial/terra/issues/1636">#1636</a> by Mary Fisher, <a href="https://github.com/rspatial/terra/issues/1463">#1463</a> by Nic Spono and <a href="https://github.com/rspatial/terra/issues/1281">#1281</a> by Sebastian Dunnett</li>
<li><code>tmpFiles</code> only looked in the default temp files folder <a href="https://github.com/rspatial/terra/issues/1630">#1630</a> by smckenzie1986</li>
<li><code>where.min</code> did not work well if there were negative values <a href="https://github.com/rspatial/terra/issues/1634">#1634</a> by Michael Sumner</li>
<li><code>plet&lt;SpatRaster&gt;</code> now works for RGB rasters and rasters with a color table <a href="https://github.com/rspatial/terra/issues/1596">#1596</a> by Agustin Lobo</li>
<li><code>vect&lt;MULTIPOINT WKT&gt;</code> did not work properly <a href="https://github.com/rspatial/terra/issues/1376">#1376</a> by silasprincipe</li>
<li><code>compareGeom&lt;SpatVector&gt;</code> did not work <a href="https://github.com/rspatial/terra/issues/1654">#1654</a> by Jason Flower</li>
<li><code>buffer&lt;SpatVector&gt;</code> is now more accurate buffers for lonlat polygons <a href="https://github.com/rspatial/terra/issues/1616">#1616</a> by Roberto Amaral-Santos</li>
<li><code>terra:interpNear</code> used square windows, not circles, beyond 100 points <a href="https://github.com/rspatial/terra/issues/1509">#1509</a> by Jean-Luc Dupouey</li>
<li><code>vect</code> read INT64 fields as integers, sometimes leading to overflows. <a href="https://github.com/rspatial/terra/issues/1666">#1666</a> by bengannon-fc</li>
<li><code>plot</code> showed a legend title even if none was requested if title parameters were specified . <a href="https://github.com/rspatial/terra/issues/1664">#1664</a> by Márcia Barbosa</li>
</ul>
</section>
<section id="enhancements-3" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-3">enhancements</h2>
<ul>
<li>improved documentation of <code>writeVector</code> overwrite when using layers. <a href="https://github.com/rspatial/terra/issues/1573">#1573</a> by Todd West</li>
<li>improved treatment of (supposedly) flipped rasters by Timothée Giraud <a href="https://github.com/rspatial/terra/issues/1627">#1627</a> and fchianucci <a href="https://github.com/rspatial/terra/issues/1646">#1646</a></li>
<li>added <code>map.pal("random")</code> <a href="https://github.com/rspatial/terra/issues/1631">#1631</a> by Agustin Lobo</li>
<li>expressions can now be used in legend titles <a href="https://github.com/rspatial/terra/issues/1626">#1626</a> by Noah Goodkind</li>
<li><code>app</code> and <code>tapp</code> now emit a warning when factors are coerced to numeric <a href="https://github.com/rspatial/terra/issues/1566">#1566</a> by shuysman</li>
<li><code>plet&lt;SpatRaster&gt;</code> now has argument “stretch” for RGB rasters <a href="https://github.com/rspatial/terra/issues/1596">#1596</a> by Agustin</li>
<li><code>%%</code> and <code>%/%</code> now behave the same for SpatRaster as for (base R) numbers <a href="https://github.com/rspatial/terra/issues/1661">#1661</a> by Klaus Huebert</li>
</ul>
</section>
<section id="new-2" class="level2">
<h2 class="anchored" data-anchor-id="new-2">new</h2>
<ul>
<li><code>patches</code> with option <code>valus=TRUE</code> can now distinguish regions based on their cell values (instead of only NA vs not-NA) <a href="https://github.com/rspatial/terra/issues/495">#495</a> by Jakub Nowosad and <a href="https://github.com/rspatial/terra/issues/1632">#1632</a> by Agustin Lobo</li>
<li><code>rowSums</code>, <code>rowMeans</code>, <code>colSums</code> and <code>colMeans</code> for SpatRaster</li>
<li><code>metags</code> for SpatRasterDataset <a href="https://github.com/rspatial/terra/issues/1624">#1624</a> by Andrea Manica</li>
<li><code>metags</code> for layers (bands) of SpatRaster are now saved to and read from GTiff files <a href="https://github.com/rspatial/terra/issues/1071">#1071</a> by Mike Koontz</li>
<li><code>global</code> has new effcient functions “anyNA” and “anynotNA” <a href="https://github.com/rspatial/terra/issues/1540">#1540</a> by Kevin J Wolz</li>
<li><code>wrap</code>, <code>saveRDS</code> and <code>serialize</code> for SpatExtent. <a href="https://github.com/rspatial/terra/issues/1430">#1430</a> by BastienFR</li>
<li><code>vect&lt;SpatGraticule&gt;</code> method suggested in relation to <a href="https://github.com/dieghernan/tidyterra/issues/155">tidyterra #155</a> by Diego Hernangómez</li>
<li><code>toMemory&lt;SpatRaster&gt;</code> and <code>&lt;SpatRasterDataset&gt;</code> methods <a href="https://github.com/rspatial/terra/pull/1660">#1660</a> by Derek Friend</li>
</ul>
</section>
</section>
<section id="version-1.7-83" class="level1">
<h1>version 1.7-83</h1>
<p>Released 2024-10-14</p>
<section id="bug-fixes-4" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-4">bug fixes</h2>
<ul>
<li><code>flip(direction="vertical")</code> failed in some cases <a href="https://github.com/rspatial/terra/issues/1518">#1518</a> by Ed Carnell</li>
<li><code>zonal(as.raster=TRUE)</code> failed when the zonal raster was categorical <a href="https://github.com/rspatial/terra/issues/1514">1514</a> by Jessi L Brown</li>
<li><code>distance&lt;data.frame,data.frame&gt;</code> and <code>&lt;matrix,matrix&gt;</code> ignored the unit argument. <a href="https://github.com/rspatial/terra/issues/1545">#1545</a> by Wencheng Lau-Medrano</li>
<li>NetCDF files with month time-step encode from 0-11 made R crash <a href="https://github.com/rspatial/terra/issues/1544">#1544</a> by Martin Holdrege</li>
<li><code>split&lt;SpatVector&gt;</code> only worked well if the split field was of type character. <a href="https://github.com/rspatial/terra/issues/1530">#1530</a> by Igor Graczykowski</li>
<li><code>gridDist</code> (and probably some other methods) emitted a “cannot overwrite existing file” error when processing large datasets <a href="https://github.com/rspatial/terra/issues/1522">#1522</a> by Clare Pearson</li>
<li><code>terrain</code> did not accept multiple variables <a href="https://github.com/rspatial/terra/issues/1561">#1561</a> by Michael Mahoney</li>
<li><code>rotate</code> was vulnerable to an integer overflow <a href="https://github.com/rspatial/terra/issues/1562">#1562</a> by Sacha Ruzzante</li>
<li><code>getTileExtents</code> could return overlapping tiles or tiles with gaps due to floating point imprecision. <a href="https://github.com/rspatial/terra/issues/1564">#1564</a> by Michael Sumner</li>
<li><code>rasterize</code> with points failed when using <code>update=TRUE</code> <a href="https://github.com/rspatial/terra/issues/1611">#1611</a> by Jordan Adamson</li>
<li><code>buffer</code> on a lonlat multipoint SpatVector returned a buffer around a single point. <a href="https://github.com/rspatial/terra/issues/1607">#1607</a> by Márcia Barbosa</li>
<li><code>buffer&lt;SpatVector&gt;</code> no longer crashes (for particular cases and unknown reasons) on windows <a href="https://github.com/rspatial/terra/issues/1331">#1331</a> by Julian090601, <a href="https://github.com/rspatial/terra/issues/1363">#1363</a> by Rupert Overall and <a href="https://github.com/rspatial/terra/issues/1531">#1531</a> by Igor Graczykowski</li>
</ul>
</section>
<section id="enhancements-4" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-4">enhancements</h2>
<ul>
<li><code>as.list&lt;SpatRasterDataset&gt;</code> sets the names of the list <a href="https://github.com/rspatial/terra/issues/1513">#1513</a></li>
<li>a SpatVectorCollection can now be subset with its names; and if made from a list it takes the names from the list. <a href="https://github.com/rspatial/terra/issues/1515">1515</a> by jedgroev</li>
<li>argument <code>fill_range</code> to plot<spatraster> and <code>plot&lt;SpatVector&gt;</code> to use the color of the extreme values of the specified range <a href="https://github.com/rspatial/terra/issues/1553">#1553</a> by Mike Koontz</spatraster></li>
<li><code>plet&lt;SpatRaster&gt;</code> can now handle rasters with a “local” (Cartesian) CRS. <a href="https://github.com/rspatial/terra/issues/1570">#1570</a> by Augustin Lobo.</li>
<li><code>geom</code> can now return “wkb” <a href="https://github.com/rspatial/terra/issues/1609">#1609</a></li>
<li>faster plotting when color names are used. In response to question by Olle on <a href="https://gis.stackexchange.com/questions/487112/plotting-discrete-categorical-rasters-with-custom-colors-slows-down-r-terra/488012#488012">gis.stackexchange.com</a></li>
</ul>
</section>
<section id="new-3" class="level2">
<h2 class="anchored" data-anchor-id="new-3">new</h2>
<ul>
<li><code>map_extent</code> returns the coordinates of the axes position of a map created with <code>plot&lt;Spat*&gt;</code> <a href="https://github.com/rspatial/terra/issues/1517">#1517</a> by Daniel Schuch</li>
<li><code>polys&lt;leaflet&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1543">#1543</a> by Márcia Barbosa</li>
<li><code>plot&lt;SpatVectorCollection&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1532">#1532</a> by jedgroev</li>
<li><code>add_mtext</code> to add text around the margins of a map. <a href="https://github.com/rspatial/terra/issues/1567">#1567</a> by Daniel Schuch</li>
</ul>
</section>
</section>
<section id="version-1.7-78" class="level1">
<h1>version 1.7-78</h1>
<p>Released 2024-05-22</p>
<section id="bug-fixes-5" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-5">bug fixes</h2>
<ul>
<li><code>writeVector</code> and <code>readVector</code> better handle empty geopackage layers <a href="https://github.com/rspatial/terra/issues/1426">#1426</a> by Andrew Gene Brown.</li>
<li><code>writeCDF</code> only wrote global variables if there was more than one <a href="https://github.com/rspatial/terra/issues/1443">#1443</a> by Daniel Schlaepfer</li>
<li><code>rasterize</code> with “by” returned odd layernames <a href="https://github.com/rspatial/terra/issues/1435">#1435</a> by Philippe Massicotte</li>
<li><code>convHull</code>, <code>minCircle</code> and <code>minRect</code> with a zero-row SpatVector crashed R <a href="https://github.com/rspatial/terra/issues/1445">#1445</a> by Andrew Gene Brown</li>
<li><code>rangeFill</code> with argument <code>circular=TRUE</code> did not work properly <a href="https://github.com/rspatial/terra/issues/1460">#1460</a> by Alice</li>
<li><code>crs(describe = TRUE)</code> returned an mis-ordered extent <a href="https://github.com/rspatial/terra/issues/1485">#1485</a> by Dimitri Falk</li>
<li><code>tapp</code> with a custom function and an index like “yearmonths” could shift time for not considering the time zone. <a href="https://github.com/rspatial/terra/issues/1483">#1483</a> by Finn Roberts</li>
<li><code>plot&lt;SpatRaster&gt;</code> could fail when there were multiple values with very small differences <a href="https://github.com/rspatial/terra/issues/1491">#1491</a> by srfall</li>
<li><code>as.data.frame&lt;SpatRaster&gt;</code> with “xy=TRUE” and “wide=FALSE” could fail if coordinates were very similar <a href="https://github.com/rspatial/terra/issues/1476">#1476</a> by Pascal Oettli</li>
<li><code>rasterizeGeom</code> now returns the correct layer name <a href="https://github.com/rspatial/terra/issues/1472">#1472</a> by HRodenhizer</li>
<li><code>cellSize</code> with “mask=TRUE” failed if the output was to be written to a temp file <a href="https://github.com/rspatial/terra/issues/1496">#1496</a> by Pascal Sauer</li>
<li><code>ext&lt;SpatVectorProxy&gt;</code> did not return the full extent <a href="https://github.com/rspatial/terra/issues/1501">#1501</a> by erkent-carb</li>
</ul>
</section>
<section id="enhancements-5" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-5">enhancements</h2>
<ul>
<li><code>extract</code> has new argument “small=TRUE” to allow for strict use of “touches=FALSE” <a href="https://github.com/rspatial/terra/issues/1419">#1419</a> by Floris Vanderhaeghe.</li>
<li><code>as.list&lt;SpatRaster&gt;</code> has new argument “geom=NULL”</li>
<li><code>rast&lt;list&gt;</code> now recognizes (x, y, z) base R “image” structures <a href="https://stackoverflow.com/questions/77949551/rspatial-convert-a-grid-list-to-a-raster-using-terra">stackoverflow</a> by Ignacio Marzan.</li>
<li><code>inset</code> has new arguments “offset” and “add” <a href="https://github.com/rspatial/terra/issues/1422">#1422</a> by Armand-CT</li>
<li><code>expanse&lt;SpatRaster&gt;</code> has argument <code>usenames</code> <a href="https://github.com/rspatial/terra/issues/1446">#1446</a> by Bappa Das</li>
<li>the default color palette is now <code>terra::map.pal("viridis")</code> instead of <code>terrain.colors</code>. The default can be changes with <code>options(terra.pal=...)</code> <a href="https://github.com/rspatial/terra/issues/1474">#1474</a> by Derek Friend</li>
<li><code>as.list&lt;SpatRasterDataset&gt;</code> now returns a named list. <a href="https://github.com/rspatial/terra/issues/1513">#1513</a> by Eric R. Scott</li>
</ul>
</section>
<section id="new-4" class="level2">
<h2 class="anchored" data-anchor-id="new-4">new</h2>
<ul>
<li><code>bestMatch&lt;SpatRaster&gt;</code> method</li>
<li>argument “pairs=TRUE” to <code>cells</code> <a href="https://github.com/rspatial/terra/issues/1487">#1487</a> by Floris Vanderhaeghe</li>
<li><code>add_grid</code> to add a grid to a map</li>
</ul>
</section>
</section>
<section id="version-1.7-71" class="level1">
<h1>version 1.7-71</h1>
<p>Released 2024-01-31</p>
<section id="bug-fixes-6" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-6">bug fixes</h2>
<ul>
<li>k_means did not work if there were NAs <a href="https://github.com/rspatial/terra/issues/1314">#1314</a> by Jakub Nowosad</li>
<li><code>layerCor</code> with a custom function did not work anymore <a href="https://github.com/rspatial/terra/issues/1387">#1387</a> by Jakub Nowosad</li>
<li><code>plet</code> broke when using “panel=TRUE” <a href="https://github.com/rspatial/terra/issues/1384">#1384</a> by Elise Hellwig</li>
<li>using /vis3/ to open a SpatRaster did not work <a href="https://github.com/rspatial/terra/issues/1382">#1382</a> by Mike Koontz</li>
<li><code>plot&lt;SpatRaster&gt;(add=TRUE)</code> sampled the raster data without considering the extent of the map. <a href="https://github.com/rspatial/terra/issues/1394">#1394</a> by Márcia Barbosa</li>
<li><code>plot&lt;SpatRaster&gt;(add=TRUE)</code> now only considers the first layer of a multi-layer SpatRaster <a href="https://github.com/rspatial/terra/issues/1395">1395</a> by Márcia Barbosa</li>
<li><code>set.cats</code> failed with a tibble was used instead of a data.frame <a href="https://github.com/rspatial/terra/issues/1406">#1406</a> by Mike Koontz</li>
<li><code>polys</code> argument “alpha” was ignored if a single color was used. <a href="https://github.com/rspatial/terra/issues/1413">#1413</a> by Derek Friend</li>
<li><code>query</code> ignore the “vars” argument if all rows were selected. <a href="https://github.com/rspatial/terra/issues/1398">#1398</a> by erkent-carb.</li>
<li><code>spatSample</code> ignored “replace=TRUE” with random sampling, na.rm=TRUE, and a sample size larger than the non NA cells. <a href="https://github.com/rspatial/terra/issues/1411">#1411</a> by Babak Naimi</li>
<li><code>spatSample</code> sometimes returned fewer values than requested and available for lonlat rasters. <a href="https://github.com/rspatial/terra/issues/1396">#1396</a> by Márcia Barbosa.</li>
</ul>
</section>
<section id="enhancements-6" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-6">enhancements</h2>
<ul>
<li><code>vect&lt;character&gt;</code> now has argument “opts” for GDAL open options, e.g.&nbsp;to declare a file encoding. <a href="https://github.com/rspatial/terra/issues/1389">#1389</a> by Mats Blomqvist</li>
<li><code>plot(plg=list(tic=""))</code> now allows choosing alternative continuous legend tic-mark styles (“in”, “out”, “through” or “none”)</li>
<li><code>makeTiles</code> has new argument “buffer” <a href="https://github.com/rspatial/terra/issues/1408">#1408</a> by Joy Flowers.</li>
</ul>
</section>
<section id="new-5" class="level2">
<h2 class="anchored" data-anchor-id="new-5">new</h2>
<ul>
<li><code>prcomp&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1361#issuecomment-1860311029">#1361</a> by Jakub Nowosad</li>
<li><code>add_box</code> to add a box around the map. The box is drawn where the axes are, not around the plotting region.</li>
<li><code>getTileExtents</code> provides the extents of tiles. These may be used in parallelization. See <a href="https://github.com/rspatial/terra/issues/1391">#1391</a> by Alex Ilich.</li>
</ul>
</section>
</section>
<section id="version-1.7-65" class="level1">
<h1>version 1.7-65</h1>
<p>Released 2023-12-15</p>
<section id="bug-fixes-7" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-7">bug fixes</h2>
<ul>
<li><code>flip</code> with argument <code>direction="vertical"</code> filed in some cases with large rasters processed in chunks <a href="https://github.com/rspatial/terra/commit/0b714b038b101011ce27391133a7a1f9a91821cc">0b714b0</a> by Dulci on <a href="https://stackoverflow.com/questions/77304534/rspatial-terraflip-error-when-flipping-a-multi-layer-spatrast-object">stackoveflow</a></li>
<li>SpatRaster now correctly handles <code>NA &amp; FALSE</code> and <code>NA | TRUE</code> <a href="https://github.com/rspatial/terra/issues/1316">#1316</a> by John Baums</li>
<li><code>set.names</code> wasn’t working properly for SpatRasterDataset or SpatRasterCollection <a href="https://github.com/rspatial/terra/pull/1333">#1333</a> by Derek Friend</li>
<li><code>extract</code> with argument “layer” not NULL shifted the layers <a href="https://github.com/rspatial/terra/issues/1332">#1332</a> by Ewan Wakefield</li>
<li><code>terraOptions</code> did not capture “memmin” on <a href="https://stackoverflow.com/questions/77552234/controlling-chunk-size-in-terra">stackoverflow</a> by dww</li>
<li><code>rasterize</code> with points and a built-in function could crash if no field was used <a href="https://github.com/rspatial/terra/issues/1369">#1369</a> by anjelinejeline</li>
</ul>
</section>
<section id="enhancements-7" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-7">enhancements</h2>
<ul>
<li><code>mosaic</code> can now use <code>fun="modal"</code></li>
<li><code>rast&lt;matrix&gt; and rast&lt;data.frame&gt;</code> now have option ’type=“xylz” <a href="https://github.com/rspatial/terra/issues/1318">#1318</a> by Agustin Lobo</li>
<li><code>extract&lt;SpatRaster,SpatVector&gt;</code> can now use multiple summarizing functions <a href="https://github.com/rspatial/terra/issues/1335">#1335</a> by Derek Friend</li>
<li><code>disagg</code> and <code>focal</code> have more optimistic memory requirement estimation <a href="https://github.com/rspatial/terra/issues/1334">#1334</a> by Mikko Kuronen</li>
</ul>
</section>
<section id="new-6" class="level2">
<h2 class="anchored" data-anchor-id="new-6">new</h2>
<ul>
<li><code>k_means&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1314">#1314</a> by Agustin Lobo</li>
<li><code>princomp&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1361">#1361</a> by Alex Ilich</li>
<li><code>has.time&lt;SpatRaster&gt;</code> method</li>
<li>new argument “raw=FALSE” to <code>rast</code>, <code>sds</code>, and <code>sprc</code> to allow ignoring scale and offset <a href="https://github.com/rspatial/terra/issues/1354">1354</a> by Insang Song</li>
</ul>
</section>
</section>
<section id="version-1.7-55" class="level1">
<h1>version 1.7-55</h1>
<p>Released 2023-10-14</p>
<section id="bug-fixes-8" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-8">bug fixes</h2>
<ul>
<li><code>mosaic</code> ignored the filename argument if the SpatRasterCollection only had a single SpatRaster <a href="https://github.com/rspatial/terra/issues/1267">#1267</a> by Michael Mahoney</li>
<li>Attempting to use <code>extract</code> with a raster file that had been deleted crashed R. <a href="https://github.com/rspatial/terra/issues/1268">#1268</a> by Derek Friend</li>
<li><code>split&lt;SpatVector,SpatVector&gt;</code> did not work well in all cases. <a href="https://github.com/rspatial/terra/issues/1256">#1256</a> by Derek Corcoran Barrios</li>
<li><code>intersect</code> with two SpatVectors crashed R if there was a date/time variable <a href="https://github.com/rspatial/terra/issues/1273">#1273</a> by Dave Dixon</li>
<li>“values=FALSE” was ignored by <code>spatSample&lt;SpatRaster&gt;(method="weights")</code> <a href="https://github.com/rspatial/terra/issues/1275">#1275</a> by François Rousseu</li>
<li><code>coltab&lt;-</code> again works with a list as value <a href="https://github.com/rspatial/terra/issues/1280">#1280</a> by Diego Hernangómez</li>
<li><code>stretch</code> with histogram equalization was not memory-safe <a href="https://github.com/rspatial/terra/issues/1305">#1305</a> by Evan Hersh</li>
<li><code>plot</code> now resets the “mar” parameter <a href="https://github.com/rspatial/terra/issues/1297">#1297</a> by Márcia Barbosa</li>
<li><code>plotRGB</code> ignored the “smooth” argument <a href="https://github.com/rspatial/terra/issues/1307">#1307</a> by Timothée Giraud</li>
</ul>
</section>
<section id="enhancements-8" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-8">enhancements</h2>
<ul>
<li>argument “gdal” in <code>project</code> was renamed to “use_gdal” <a href="https://github.com/rspatial/terra/issues/1269">#1269</a> by Stuart Brown.</li>
<li>SpatVector attributes can now be stored as an ordered factor <a href="https://github.com/rspatial/terra/issues/1277">#1277</a> by Ben Notkin</li>
<li><code>plot&lt;SpatVector&gt;</code> now uses an “interval” legend when breaks are supplied <a href="https://github.com/rspatial/terra/issues/1303">#1303</a> by Gonzalo Rizzo</li>
<li><code>crop&lt;SpatRaster&gt;</code> now keeps more metadata, including variable names <a href="https://github.com/rspatial/terra/issues/1302">#1302</a> by rhgof</li>
<li><code>extract(fun="table")</code> now returns an easier to use data.frame <a href="https://github.com/rspatial/terra/issues/1294">#1294</a> by Fernando Aramburu.</li>
</ul>
</section>
<section id="new-7" class="level2">
<h2 class="anchored" data-anchor-id="new-7">new</h2>
<ul>
<li><code>metags&lt;-</code> and <code>metags</code> to set arbitrary SpatRaster/file level metadata <a href="https://github.com/rspatial/terra/issues/1304">#1304</a> by Francesco Chianucci</li>
</ul>
</section>
</section>
<section id="version-1.7-46" class="level1">
<h1>version 1.7-46</h1>
<p>Released 2023-09-06</p>
<section id="bug-fixes-9" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-9">bug fixes</h2>
<ul>
<li><code>plot&lt;SpatVector&gt;</code> used the wrong main label in some cases <a href="https://github.com/rspatial/terra/issues/1210">#1210</a> by Márcia Barbosa</li>
<li><code>plotRGB</code> failed with an “ext=” argument <a href="https://github.com/rspatial/terra/issues/1228">#1228</a> by Dave Edge</li>
<li><code>rast&lt;array&gt;</code> failed badly when the array had less than three dimensions. <a href="https://github.com/rspatial/terra/issues/1254">#1254</a> by andreimirt.</li>
<li><code>all.equal</code> for a SpatRaster with multiple layers <a href="https://github.com/rspatial/terra/issues/1236">#1236</a> by Sarah Endicott</li>
<li><code>zonal(wide=FALSE)</code> could give wrong results if the zonal SpatRaster had “layer” as layername. <a href="https://github.com/rspatial/terra/issues/1251">#1251</a> by Jeff Hanson</li>
<li><code>panel</code> now support argument “range” <a href="https://github.com/rspatial/terra/issues/1241">#141</a> by Jakub Nowosad</li>
<li><code>rasterize</code> with <code>by=</code> returned wrong layernames if the by field was not sorted <a href="https://github.com/rspatial/terra/issues/1266">#1266</a> by Sebastian Dunnett</li>
<li><code>mosaic</code> with multiple layers was not correct <a href="https://github.com/rspatial/terra/issues/1262">#1262</a> by Jean-Romain</li>
</ul>
</section>
<section id="enhancements-9" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-9">enhancements</h2>
<ul>
<li><code>wrap&lt;SpatRaster&gt;</code> now stores color tables <a href="https://github.com/rspatial/terra/issues/1215">#1215</a> by Patrick Brown</li>
<li><code>global</code> now has a “maxcell” argument <a href="https://github.com/rspatial/terra/issues/1213">#1213</a> by Alex Ilich</li>
<li><code>layerCor</code> with fun=‘pearson’ now returns output with the layer names <a href="https://github.com/rspatial/terra/issues/1206">#1206</a></li>
<li><code>vrt</code> now has argument “set_names” <a href="https://github.com/rspatial/terra/issues/1244">#1244</a> by sam-a-levy</li>
<li><code>vrt</code> now has argument “return_filename” <a href="https://github.com/rspatial/terra/issues/1258">#1258</a> by Krzysztof Dyba</li>
<li><code>project&lt;SpatRaster&gt;</code> has new argument “by_util” exposing the GDAL warp utility <a href="https://github.com/rspatial/terra/pull/1222">#1222</a> by Michael Sumner.</li>
</ul>
</section>
<section id="new-8" class="level2">
<h2 class="anchored" data-anchor-id="new-8">new</h2>
<ul>
<li><code>compareGeom</code> for list and SpatRasterCollection <a href="https://github.com/rspatial/terra/issues/1207">#1207</a> by Sarah Endicott</li>
<li><code>is.rotated&lt;SpatRaster&gt;</code> method <a href="https://github.com/rspatial/terra/issues/1229">#1229</a> by Andy Lyons</li>
<li><code>forceCCW&lt;SpatVector&gt;</code> method to force counter-clockwise orientation of polygons <a href="https://github.com/rspatial/terra/issues/1249">#1249</a> by srfall.</li>
<li><code>vrt_tiles</code> returns the filenames of the tiles in a vrt file <a href="https://github.com/rspatial/terra/issues/1261">#1261</a> by Derek Friend</li>
<li><code>extractAlong</code> to extract raster cell values for a line that are ordered along the line. <a href="https://github.com/rspatial/terra/issues/1257">#1257</a> by adamkc.</li>
</ul>
</section>
</section>
<section id="version-1.7-39" class="level1">
<h1>version 1.7-39</h1>
<p>Released 2023-06-23</p>
<section id="bug-fixes-10" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-10">bug fixes</h2>
<ul>
<li>the tempdir option did not use path.expand. <a href="https://github.com/rspatial/terra/issues/1195">#1195</a> by Alex Ilich</li>
<li>the layer names returned by predict where inconsistent when using argument “index”. <a href="https://github.com/rspatial/terra/issues/1194">#1194</a> by Michael Mahoney</li>
<li>compilation failed with older compilers because of use of std::filesystem <a href="https://github.com/rspatial/terra/issues/1191">#1191</a></li>
<li>Small changes to <code>RGB&lt;-</code> and <code>coltab&lt;-</code> so that terra can be installed with R-devel (after a bug fix https://bugs.r-project.org/show_bug.cgi?id=18538)</li>
</ul>
</section>
</section>
<section id="version-1.7-37" class="level1">
<h1>version 1.7-37</h1>
<p>Released 2023-06-18</p>
<section id="bug-fixes-11" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-11">bug fixes</h2>
<ul>
<li><code>rasterize</code> with points and a custom function did not work for large rasters. <a href="https://github.com/rspatial/terra/issues/1127">#1127</a> by Skip Woolley</li>
<li><code>crop&lt;SpatRaster, SpatVector&gt;</code> with “mask=TRUE” did not work well if the raster had a scale/offset <a href="https://github.com/rspatial/terra/issues/1128">#1128</a> by Monika Anna Tomaszewska</li>
<li><code>zonal&lt;SpatRaster&gt;</code> with a custom function always removed NAs. <a href="https://github.com/rspatial/terra/issues/1133">#1133</a> by Matthias Weigand</li>
<li><code>wrap&lt;SpatRaster&gt;</code> lost changed layer names if the source was from disk; and information on some time-step in some cases. <a href="https://github.com/rspatial/terra/issues/1144">#1144</a> by Pascal Führlich</li>
<li><code>global(fun="isNA")</code> was not correct when the SpatRaster had multiple layers <a href="https://github.com/rspatial/terra/issues/1141">#1141</a> by Robin Freeman</li>
<li><code>interpIDW</code> with <code>near=TRUE</code> did not work properly (near=TRUE is now the default). <a href="https://github.com/rspatial/terra/issues/1186">#1186</a> by Hugh Graham</li>
<li>“YYYY-1-1” was sometimes encoded as “YYYY-13-1”. <a href="https://github.com/rspatial/terra/issues/1168">#1168</a> by Colin Brust</li>
</ul>
</section>
<section id="enhancements-10" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-10">enhancements</h2>
<ul>
<li><code>panel</code> for categorical SpatRasters. <a href="https://github.com/rspatial/terra/issues/1143">#1143</a> by Jason Flower</li>
<li>argument “ext” in <code>plot&lt;SpatRaster&gt;</code> can now also expand the plot. <a href="https://github.com/rspatial/terra/issues/1136">#1136</a> by Jakub Nowosad.</li>
<li>argument <code>overwrite=FALSE</code> to <code>makeTiles</code>. <a href="https://github.com/rspatial/terra/issues/1167">#1167</a> by Gray Martin.</li>
<li>legend options for <code>&lt;plet,SpatVector</code>&gt;. <a href="https://github.com/rspatial/terra/issues/1177">#1177</a> by Agustin Lobo.</li>
<li>better handling of mixed geometry type vector data by <code>vect</code> and <code>svc</code>. <a href="https://github.com/rspatial/terra/issues/1160">#1160</a> by Mike Sumner.</li>
<li>new argument <code>sql</code> to <code>query&lt;SpatVectorProxy&gt;</code>. <a href="https://github.com/rspatial/terra/issues/1157">#1157</a> by Carl Boettiger</li>
<li>support for writing raster data to a vitual file system <a href="https://github.com/rspatial/terra/issues/1209">#1209</a> by Carl Boettiger</li>
</ul>
</section>
<section id="new-9" class="level2">
<h2 class="anchored" data-anchor-id="new-9">new</h2>
<ul>
<li><code>wrap&lt;SpatRasterDataset&gt;</code> and <code>wrap&lt;SpatRasterCollection&gt;</code> methods. <a href="https://github.com/rspatial/terra/issues/954">#954</a> by James Camac</li>
</ul>
</section>
</section>
<section id="version-1.7-29" class="level1">
<h1>version 1.7-29</h1>
<p>Released 2023-04-22</p>
<section id="new-10" class="level2">
<h2 class="anchored" data-anchor-id="new-10">new</h2>
<ul>
<li><code>regress&lt;SpatRaster,numeric&gt;</code> to get regression model coefficients for each cell, with a fixed “X”.</li>
<li><code>regress&lt;SpatRaster,SpatRaster&gt;</code> to get regression model coefficients for each cell.</li>
</ul>
</section>
<section id="enhancements-11" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-11">enhancements</h2>
<ul>
<li><code>lapp&lt;SpatRasterDataset&gt;</code> is now more flexible in that it can now also use functions that are vectorized by cell, not by chunk. See <a href="https://github.com/rspatial/terra/issues/1029">#1029</a></li>
<li><code>project&lt;SpatVector&gt;</code> has new argument “partial=FALSE” that can be used to keep geometries that can only be partially included in the output crs.</li>
<li>extracting a SpatVector column with a non-existing variable name now returns NULL (because that is what a data.frame does) instead of throwing an error. <a href="https://github.com/rspatial/terra/issues/1118">#1118</a> by Derek Friend.</li>
</ul>
</section>
<section id="bug-fixes-12" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-12">bug fixes</h2>
<ul>
<li>a problem with reading empty categories in .img files created buggy SpatRasters</li>
<li><code>global</code> with fun=“notNA” was wrong <a href="https://github.com/rspatial/terra/issues/1111">#111</a> by Jeffrey Hanson</li>
<li><code>extract&lt;SpatRaster,SpatVector&gt;</code> with “bind=TRUE” did not work</li>
<li><code>extract&lt;SpatRaster,SpatVector&gt;</code> with point geometries and a “fun” returned values in the wrong order</li>
<li><code>plot&lt;SpatRaster&gt;</code> argument “colNA” did not work when “alpha” was also set <a href="https://github.com/rspatial/terra/issues/1102">#1102</a> by Márcia Barbosa</li>
<li><code>crop&lt;SpatRaster&gt;</code> with “extend=TRUE” did not extend the SpatRaster if the input had no cell values. <a href="https://github.com/rspatial/terra/issues/1114">#1114</a> by Jasper van Doninck</li>
<li>setting a factor or date/time variable in a SpatVector did not work <a href="https://github.com/rspatial/terra/issues/1117">#1117</a> by MK Schneider</li>
<li><code>focalMat</code> did not work well when using terraOptions(todisk=T) <a href="https://github.com/rspatial/terra/issues/1116">#1116</a></li>
</ul>
</section>
</section>
<section id="version-1.7-23" class="level1">
<h1>version 1.7-23</h1>
<p>Released 2023-04-08</p>
<section id="new-11" class="level2">
<h2 class="anchored" data-anchor-id="new-11">new</h2>
<ul>
<li>The <code>halo</code> function for adding halo-ed text to plots is now exposed</li>
<li><code>add_legend</code> to allow using a keyword such as “topleft” to position a custom legend. <a href="https://github.com/rspatial/terra/issues/1053">#1053</a> by Márcia Barbosa</li>
<li>the <code>same.crs</code> function is now exported</li>
<li><code>countNA&lt;SpatRaster&gt;</code> method</li>
<li><code>split&lt;SpatVector,SpatVector&gt;</code> to split polygons with lines</li>
</ul>
</section>
<section id="enhancements-12" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-12">enhancements</h2>
<ul>
<li>better support for other color spaces than RGB <a href="https://github.com/rspatial/terra/issues/1060">#1060</a> by Dominic Royé</li>
<li>path expansion in writeVector <a href="https://github.com/rspatial/terra/issues/1055">#1055</a> by Andrew Gene Brown.</li>
<li><code>clamp&lt;SpatRaster&gt;</code> now also accepts SpatRasters to set the lower and upper boundaries.</li>
<li><code>freq</code> has new arguments “zones=NULL” and “wide=FALSE”, to allow tabulation of values by zone.</li>
<li><code>expanse&lt;SpatRaster&gt;</code> has new arguments “zones=NULL” and “wide=FALSE”, to allow tabulation of values by zone.</li>
<li><code>unique&lt;SpatRaster&gt;</code> has new argument “digits=NA”</li>
<li><code>rasterize&lt;SpatRaster,SpatVector&gt;</code> now accepts fun=“table” to tabulate cells by cell value</li>
<li><code>rast&lt;character&gt;</code> has new argument “snap” to snap the window in or out. <a href="https://github.com/rspatial/terra/issues/1094">#1094</a> by Derek Friend</li>
<li><code>plot</code> has new argument “clip=TRUE” that can be set to FALSE to avoid clipping the axes to the mapped area <a href="https://github.com/rspatial/terra/issues/1080">#1080</a> by Márcia Barbosa</li>
<li>better error message when coercing an sf object that is not fully formed <a href="https://github.com/rspatial/terra/issues/1098">#1098</a> by Brandon McNellis</li>
<li><code>writeCDF&lt;SpatRaster&gt;</code> had new argument “split” allowing to treat each layer as a subdataset <a href="https://github.com/rspatial/terra/issues/1077">#1077</a> by Andrea Manica</li>
<li><code>global</code> now accepts multiple summarizing functions</li>
</ul>
</section>
<section id="bug-fixes-13" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-13">bug fixes</h2>
<ul>
<li>A SpatRaster with RGB layers was forced to INT1U when writing <a href="https://github.com/rspatial/terra/issues/1051">#1051</a> by Cesar Aybar</li>
<li>In files with multiple vector layers, the crs of the first layer was always used; ignoring that the crs could be different for other layers <a href="https://github.com/rspatial/terra/issues/1052">#1052</a> by Andrew Gene Brown</li>
<li><code>sieve</code> was not able to write to file <a href="https://github.com/rspatial/terra/issues/1061">#1061</a> by leo</li>
<li><code>rasterize</code> did not work with sf objects <a href="https://github.com/rspatial/terra/issues/1054">#1054</a> by Jakub Nowosad</li>
<li><code>query</code> did not work for hyphenated layer names <a href="https://github.com/rspatial/terra/issues/1058">#1058</a> by Robbie Price</li>
<li><code>focal3D</code> na.policy did not work <a href="https://github.com/rspatial/terra/issues/1057">#1057</a> by Flávio Mota</li>
<li><code>layerCor</code> with <code>na.rm=TRUE</code> failed for a SpatRaster with more than 2 layers <a href="https://github.com/rspatial/terra/issues/1056">#1056</a> by Alex Ilich.</li>
<li>inset with keyword positioning did not work well <a href="https://github.com/rspatial/terra/issues/1053">#1053</a> by Márcia Barbosa</li>
<li>yearmonths time stamps were not read from file for years &lt;1970 and &gt;2037 <a href="https://github.com/rspatial/terra/issues/1062">#1062</a> by Colin Brust</li>
<li><code>compareGeom</code> did not work for multiple SpatRasters <a href="https://github.com/rspatial/terra/issues/1064">#1063</a></li>
<li><code>viewshed</code> could not handle a filename argument. <a href="https://github.com/rspatial/terra/issues/1100">#1100</a> by kamistick</li>
</ul>
</section>
</section>
<section id="version-1.7-18" class="level1">
<h1>version 1.7-18</h1>
<p>Released 2023-03-06</p>
<section id="new-12" class="level2">
<h2 class="anchored" data-anchor-id="new-12">new</h2>
<ul>
<li>argument <code>order=FALSE</code> to <code>sort&lt;SpatRaster&gt;</code></li>
<li><code>sort&lt;SpatVector&gt;</code> (and <code>&lt;data.frame&gt;</code> method</li>
<li>argument <code>by=NULL</code> to <code>rasterize&gt;</code> <a href="https://github.com/rspatial/terra/issues/986">#986</a> by Sam Weber</li>
<li><code>meta&lt;SpatRaster&gt;</code> method to get metadata</li>
<li><code>compare&lt;SpatRaster&gt;</code> and <code>logic&lt;SpatRaster&gt;</code> methods</li>
<li><code>vect&lt;SpatExtent&gt;</code> method</li>
<li><code>panel&lt;SpatRaster&gt;</code> for “panel” plots (multiple layers, single legend)</li>
</ul>
</section>
<section id="enhancements-13" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-13">enhancements</h2>
<ul>
<li>it is now possible to save terra options across sessions <a href="https://github.com/rspatial/terra/issues/995">#995</a> by Guillaume Patoine.</li>
<li>better warnings for <code>is.lonlat</code> <a href="https://github.com/rspatial/terra/issues/1006">#1006</a> by Andrew Gene Brown</li>
<li>argument <code>na.rm</code> to <code>merge&lt;SpatRaster&gt;</code></li>
<li>the axes of maps created with <code>plot</code> are now snug around the mapped area, instead of at the limits of the graphics figure region.</li>
<li>C++ cleaning to avoid warnings by clang-tidy (e.g.&nbsp;now using <code>.empty()</code> instead of <code>.size()==0</code>). [#1013-1017] by Michael Chirico</li>
<li><code>rasterize</code> with lines and polygons can now use the “fun” argument (for min, max, mean, and sum) <a href="https://github.com/rspatial/terra/issues/1041">#1041</a> by Bart Huntley</li>
</ul>
</section>
<section id="bug-fixes-14" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-14">bug fixes</h2>
<ul>
<li>the legend created by <code>plet</code> was not always correct. <a href="https://github.com/rspatial/terra/issues/983">#983</a> by Simon Rolph</li>
<li><code>spatSample&lt;SpatRaster&gt;(regular=TRUE)</code> failed with providing two numbers (row, col) as sample size. <a href="https://github.com/rspatial/terra/issues/991">#991</a> by srfall</li>
<li><code>merge&lt;SpatRaster&gt;</code> did not ignore NAs <a href="https://github.com/rspatial/terra/issues/1002">#1002</a> by jmmonnet.</li>
<li><code>writeCDF</code> failed when using argument force_v4 <a href="https://github.com/rspatial/terra/issues/1009">#1009</a> by R. Kyle Bocinsky</li>
<li><code>predict</code> better handling of rasters with many NAs <a href="https://github.com/rspatial/terra/issues/998">#988</a> by Lucas Johnson</li>
<li><code>layerCor</code> did not handle NAs well if they were in different cells across layers <a href="https://github.com/rspatial/terra/issues/1034">#1034</a> by François Rousseu.</li>
</ul>
</section>
</section>
<section id="version-1.7-3" class="level1">
<h1>version 1.7-3</h1>
<p>Released 2023-01-24</p>
<section id="new-13" class="level2">
<h2 class="anchored" data-anchor-id="new-13">new</h2>
<ul>
<li>argument <code>w</code> to <code>zonal&lt;SpatRaster,SpatRaster&gt;</code> to compute weighted means</li>
<li><code>zonal&lt;SpatRaster,SpatVector&gt;</code> method</li>
<li><code>clamp_ts</code> method</li>
</ul>
</section>
<section id="bug-fixes-15" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-15">bug fixes</h2>
<ul>
<li>in the previous version, a bug was introduced such that the order of operation in arithmetic operations with SpatRasters was ignored. <a href="https://github.com/rspatial/terra/issues/978">#978</a> by Andrew Marx</li>
<li>Fixed <code>split&lt;SpatVector&gt;</code>. <a href="https://github.com/rspatial/terra/issues/979">#979</a> by srfall</li>
<li><code>spatSample</code> with <code>as.df=FALSE</code> returned a data.frame instead of a matrix <a href="https://github.com/rspatial/terra/issues/982">#982</a> by Alex Ilich</li>
</ul>
</section>
</section>
<section id="version-1.6-53" class="level1">
<h1>version 1.6-53</h1>
<p>Released 2023-01-17</p>
<section id="new-14" class="level2">
<h2 class="anchored" data-anchor-id="new-14">new</h2>
<ul>
<li>arithmetic and logical operations between a SpatRaster and a matrix, to allow for using cell-varying and cell/layer-varying scalars. layer-varying scalars were already supported via vectors.</li>
</ul>
</section>
<section id="enhancements-14" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-14">enhancements</h2>
<ul>
<li><code>shade</code> is now vectorized for arguments <code>angle</code> and <code>direction</code> to facilitate generating multiple hillshades that can be combined for a better result <a href="https://github.com/rspatial/terra/issues/948">#948</a> by Jürgen Niedballa</li>
<li><code>sharedPaths</code> now uses spatial indices <a href="https://github.com/rspatial/terra/issues/960">#960</a> by Jeff Hanson</li>
<li><code>predict</code> has better support for models such as ranger that do not return anything for missing values <a href="https://github.com/rspatial/terra/issues/968">#968</a> by Alex Ilich</li>
</ul>
</section>
<section id="bug-fixes-16" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-16">bug fixes</h2>
<ul>
<li><code>writeCDF</code> now supports writing yearly time steps <a href="https://github.com/rspatial/terra/issues/926">#926</a> by Andrea Manica</li>
<li><code>as.contour</code> now works for a single level <a href="https://github.com/rspatial/terra/issues/966">#966</a> by Johannes Signer</li>
<li>subsetting a SpatRaster with a window returned a SpatRaster with the dimensions of the non-windowed raster, thus changing the resolution. <a href="https://github.com/rspatial/terra/issues/964">#964</a> by Derek Friend</li>
<li>removing a factor variable from a SpatVector crashed R. <a href="https://github.com/rspatial/terra/issues/969">#969</a> by Andrew Gene Brown</li>
<li>median did not always return the correct number for a SpatRaster with 3 or more layers <a href="https://github.com/rspatial/terra/issues/970">#970</a> by MatteaE</li>
</ul>
</section>
</section>
<section id="version-1.6-47" class="level1">
<h1>version 1.6-47</h1>
<p>Released 2022-12-02</p>
<section id="new-15" class="level2">
<h2 class="anchored" data-anchor-id="new-15">new</h2>
<ul>
<li><code>roll&lt;SpatRaster&gt;</code> method for rolling (moving) average and other rolling functions</li>
<li><code>noNA&lt;SpatRaster&gt;</code> method to identify cells that are not NA (across layers)</li>
<li><code>rangeFill&lt;SpatRaster&gt;</code> method</li>
</ul>
</section>
<section id="enhancements-15" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-15">enhancements</h2>
<ul>
<li>argument <code>exhaustive</code> to <code>spatSample&lt;SpatRaster&gt;</code> for large sparse rasters. [#905] by PetiteTong.</li>
<li><code>focalPairs</code> and <code>focalReg</code> can now use the values in custom windows as weights. [#907] by Fabian Fischer.</li>
<li><code>focalReg</code> now has additional argument “intercept=TRUE”. [#916] by Jordan Adamson</li>
<li><code>crs(x, warn=TRUE)&lt;-</code> now emits a warning about the difference between transforming and setting a crs when x already had a crs. [#897] by Márcia Barbosa.</li>
<li>it is now possible to write a scale and offset with <code>writeRaster</code> [#900] by Kyle David</li>
<li><code>crosstab</code> now shows the labels names for a categorical SpatRaster. [895] by Derek Corcoran Barrios</li>
<li><code>makeTiles</code> can now take a SpatVector to define the tiles. [920] by Tristan Goodbody</li>
</ul>
</section>
<section id="bug-fixes-17" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-17">bug fixes</h2>
<ul>
<li><code>focalPairs</code> and <code>focalReg</code> now work for custom windows [#907] by Fabian Fischer</li>
<li>argument “alpha” in <code>plot&lt;SpatVector&gt;</code> was not working properly. [#906] by Márcia Barbosa.</li>
<li><code>time&lt;-</code> with time-step “years” could not handle negative years. [#911] by Andrea Manica</li>
<li><code>wrap</code>/<code>unwrap</code> (and by extension <code>saveRDS</code>/<code>readRDS</code>) did not handle categorical rasters well [#912] by Christine Anderson.</li>
<li><code>interpIDW</code> failed with GDAL 3.6 [#910] by Roger Bivand</li>
<li><code>spatSample</code> with strata bug fix “unable to find an inherited method for function ‘trim’” [#919] by Alfredo Ascanio</li>
<li>it is possible to slice a SpatRaster with a SpatExtent [#914] by Jakub Nowosad.</li>
<li><code>merge</code>/<code>mosaic</code> did not handle NAs when using two layers [#913] by Joao Carreiras.</li>
</ul>
</section>
<section id="name-changes" class="level2">
<h2 class="anchored" data-anchor-id="name-changes">name changes</h2>
<ul>
<li>focalCor -&gt; focalPairs to reflect its possible use beyond correlation</li>
</ul>
</section>
</section>
<section id="version-1.6-41" class="level1">
<h1>version 1.6-41</h1>
<p>Released 2022-11-18</p>
<section id="new-16" class="level2">
<h2 class="anchored" data-anchor-id="new-16">new</h2>
<ul>
<li><code>[</code> and <code>[&lt;-</code> for SpatRaster now have a third index <code>k</code> for subsetting or assigning values by layer</li>
<li><code>anyNA</code> and <code>allNA</code> for SpatRaster</li>
<li><code>unwrap</code> to restore a PackedSpatVector or PackedSpatRaster</li>
<li><code>rasterizeWin</code> method for rasterization with a moving window (circle, ellipse, rectangle, buffer)</li>
<li><code>interpIDW</code> method for inverse-distance-weighted interpolation of points with a moving window</li>
<li><code>interpNear</code> method for nearest neighbor interpolation of points with a moving window</li>
<li><code>viewshed</code> method for SpatRaster</li>
<li><code>update</code> method for SpatRaster to write new names or a new extent or crs to an existing raster file.</li>
<li><code>sieve</code> filter for SpatRaster</li>
<li>argument <code>segments=FALSE</code> to <code>disagg&lt;SpatRaster&gt;</code></li>
<li><code>sprc&lt;character&gt;</code> method to create a SpatRasterCollection from a file with subdatasets</li>
<li><code>graticule</code> function to create a SpatGraticule and related methods <code>plot&lt;SpatGraticule&gt;</code> and <code>crop&lt;SpatGraticule&gt;</code></li>
<li><code>elongate</code> method for SpatVector lines</li>
</ul>
</section>
<section id="enhancements-16" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-16">enhancements</h2>
<ul>
<li>faster <code>mosaic</code> and <code>merge&lt;SpatRaster&gt;</code> [#577] by Jean-Romain</li>
<li><code>wrap&lt;SpatRaster&gt;</code> now uses file references if the data is deemed too large to all load into memory. [#801] by Jean-Romain</li>
<li><code>readRDS</code> and <code>unserialize</code> now return a SpatRaster or SpatVector (instead of a PackedSpat*)</li>
<li>better support for a “local” arbitrary Euclidean crs [#797] by Agustin Lobo</li>
<li><code>clamp</code> can now take low and high values for each layer</li>
<li>The <code>pax</code> argument in <code>plot</code> now provides more control over what to draw on each axis via parameters <code>side</code>, <code>tick</code> and <code>lab</code></li>
<li>The <code>pax</code> argument in <code>plot</code> now has argument <code>retro</code> to use a sexagesimal notation of degrees</li>
<li><code>extend</code> has a new argument <code>fill=NA</code></li>
<li>A warning is now given when <code>c</code>ombining SpatRasters with different CRSs. [#818] by Andrew Marx</li>
<li><code>plotRGB</code> now accounts for the value of zlim when stretching; allowing to use the same coloring scheme across SpatRasters [#810] by Agustin Lobo.</li>
<li>the center of rotation for <code>spin</code> is now vectorized</li>
</ul>
</section>
<section id="bug-fixes-18" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-18">bug fixes</h2>
<ul>
<li>The annoying garbage collection messages <code>Error in x$.self$finalize() : attempt to apply non-function</code> is now suppressed in most cases. [#218] by Charlie Joey Hadley. This problem should go away altogether when a new version of “Rcpp” is released (ETA Jan 2023) thanks to a fix by Kevin Ushey [#30]</li>
<li><code>spatSample</code> with <code>na.rm</code> and SpatRasters with multiple layers did not work. [#800] by Andrea Manica</li>
<li><code>adjacent&lt;SpatRaster&gt;</code> with <code>pairs=TRUE, include=TRUE</code> ignored <code>include=TRUE</code> [#808] by Joseph Lewis</li>
<li><code>rasterize</code> did not accept “NA” as value for updating [#809] by Márcia Barbosa</li>
<li><code>extract</code> with a perfectly vertical or horizontal line failed in some cases [#823] by Dimitri Falk</li>
<li><code>wrap&lt;SpatVector&gt;</code> failed if there was a single point geometry [#815] by Patrick Schaefer</li>
<li><code>extract&lt;SpatRaster&gt;</code> with <code>weights=TRUE</code> did not return values [#814] by Jean-Luc Dupouey.</li>
<li><code>x[["newname"]] &lt;- r</code> for SpatRasters <code>x</code> and <code>r</code> did not work [#795] by Jim Shady</li>
<li>fixed support for some non-conventional netCDF files [#869] by Mike Sumner, [#864] by eleanorecc, and [#851] by Philippe Massicotte.</li>
</ul>
</section>
<section id="name-changes-1" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-1">name changes</h2>
<ul>
<li><code>costDistance</code> -&gt; <code>costDist</code> to avoid conflict with {gdistance}</li>
<li><code>gridDistance</code> -&gt; <code>gridDist</code> for consistency</li>
</ul>
</section>
</section>
<section id="version-1.6-17" class="level1">
<h1>version 1.6-17</h1>
<p>Released 2022-09-10</p>
<section id="new-17" class="level2">
<h2 class="anchored" data-anchor-id="new-17">new</h2>
<ul>
<li><code>droplevels</code> for SpatRaster. [#757] by Rodolfo Jaffe.</li>
<li><code>normalize.longitude</code> for SpatVector.</li>
<li><code>scoff</code> to get and <code>scoff&lt;-</code> to set the scale (gain) and offset of a SpatRaster.</li>
</ul>
</section>
<section id="enhancements-17" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-17">enhancements</h2>
<ul>
<li>new argument <code>raw=FALSE</code> to <code>extract&lt;SpatRaster&gt;</code> [#776] by Thomas Roh.</li>
<li><code>as.data.frame</code> now takes <code>na.rm=NA</code> to only remove rows that are NA for all layers. The default value changed from <code>TRUE</code> to <code>NA</code>. [#792] by Ed Carnell</li>
<li>faster plotting of SpatVector data [#774] by Krzysztof Dyba</li>
<li><code>distance&lt;SpatRaster&gt;</code> has new arguments “target” and “exclude”. [#560] by Bernardo Brandão Niebuhr</li>
<li>new argument <code>sparse=FALSE</code> for `relate&lt;SpatVector,SpatVector&gt;.</li>
<li>new argument <code>usenames=FALSE</code> for <code>lapp&lt;SpatRasterDataset&gt;</code> [#793] by Colin Brust.</li>
<li><code>vect&lt;character&gt;</code> now reports that a file is non-existent [#784] by John Baums</li>
<li>faster <code>relate</code> [#716] by Krzysztof Dyba</li>
<li><code>focal3D</code> now checks if all the window’s dimensions are odd [#772] by Neander Marcel Heming</li>
</ul>
</section>
<section id="bug-fixes-19" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-19">bug fixes</h2>
<ul>
<li><code>all.equal</code> bug [#756] fixed by John Baums</li>
<li><code>extract&lt;"SpatRaster","sf"&gt;</code> ignored the ID argument. [#755] by Dainius Masiliūnas.</li>
<li>There is now (in all cases) a check to avoid overwriting (one of) the input file(s) when writing a raster file [#760] by John Baums</li>
<li><code>vrt</code> is no longer constrained by the maximum number of files that can be opened [#780] by 8Ginette8<br>
</li>
<li><code>weighted.mean</code> crashed with numeric weights and na.rm=TRUE [#777] by David Holstius</li>
<li><code>project&lt;SpatRaster&gt;</code> did not consider an extent that was set by the user [#775] by Philippe Massicotte</li>
<li><code>focalCor</code> failed for large rasters [#607] by John Clark</li>
<li><code>focal</code> with <code>expand=TRUE</code> was prone to run out of memory [#610] by Nathan Elliott</li>
<li><code>crop&lt;SpatVector&gt;</code> did not work well when the second argument were points or lines [#782] by Márcia Barbosa</li>
<li><code>adjacent</code> with <code>pairs=TRUE</code> now respects the <code>include=TRUE</code> argument [808] by Joseph Lewis</li>
</ul>
</section>
</section>
<section id="version-1.6-7" class="level1">
<h1>version 1.6-7</h1>
<p>Released 2022-08-07</p>
<section id="new-18" class="level2">
<h2 class="anchored" data-anchor-id="new-18">new</h2>
<ul>
<li>method <code>blocks</code> to guide reading raster data in chunks. [#748] by John Baums</li>
</ul>
</section>
<section id="enhancements-18" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-18">enhancements</h2>
<ul>
<li>A warning is given when writing raster values that are outside the limits of the requested datatype [#752] by Jim Shady</li>
<li>Arguments to <code>extract</code> were simplified. [#736] by François Rousseu</li>
</ul>
</section>
<section id="bug-fixes-20" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-20">bug fixes</h2>
<ul>
<li>values of <code>focal</code> where not correct if the input SpatRaster had multiple layers and a “custom” function. [#727] by Jean-Luc Dupouey.</li>
<li><code>plot&lt;SpatRaster&gt;</code> did not honor argument <code>legend=FALSE</code>. [#738] by Grzegorz Sapijaszko</li>
<li><code>expanse</code> failed when processing in chunks [#741] by Gareth Davies</li>
<li><code>crop&lt;SpatRaster,SpatExtent&gt;</code> with argument <code>snap="out"</code> could lead to a crash if the extent was beyond the SpatRaster. [#740] by Mauricio Zambrano-Bigiarini</li>
</ul>
</section>
</section>
<section id="version-1.6-3" class="level1">
<h1>version 1.6-3</h1>
<p>Released 2022-07-25</p>
<section id="bug-fixes-21" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-21">bug fixes</h2>
<ul>
<li><code>subst</code> no longer uses values that it changed earlier on. [#639] by Paul Smith</li>
<li><code>as.points&lt;SpatRaster&gt;</code> could return wrong factor labels. [#640] by Attilio Benini</li>
<li><code>mask&lt;SpatRaster,SpatVector&gt;</code> crashed when the results were written to disk. [#646] by Monika Anna Tomaszewska</li>
<li><code>extract&lt;SpatRaster,SpatVector(points)&gt;(xy=TRUE)</code> returned the locations of the points, not the xy-coordinates of the cells. [#650] by Ward Fonteyn</li>
<li><code>wrap&lt;SpatRaster&gt;</code> did not return the correct labels for some categorical rasters. [#652] by Jakub Nowosad</li>
<li>better support for non-latin characters in the legend [#658] by Krzysztof Dyba</li>
<li>holes in small lon/lat polygons are now properly buffered [#689] by David Hofmann</li>
</ul>
</section>
<section id="enhancements-19" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-19">enhancements</h2>
<ul>
<li><code>subst</code> can now substitute the values from multiple input layers with a single output value (layer)</li>
<li><code>subset&lt;SpatVector&gt;</code> now behaves like <code>subset&lt;data.frame&gt;</code> [#648] by Andrew Gene Brown</li>
<li>setting category labels with a vector of names is now deprecated. A data.frame with at least two columns should be used. The first column should have the cell values (IDs).</li>
<li>It is now possible to “drop” a layer from a SpatRaster by setting it to NULL [#664] by Daniel Valentins</li>
<li><code>freq</code> now provides the labels of factors, even if <code>bylayer=FALSE</code>. It now always returns a <code>data.frame</code> (it used to return a <code>matrix</code> in some cases. [#687] by Rodolfo Jaffé</li>
<li><code>disagg</code> and <code>aggregate</code> now return a warning instead of an error when using a (dis)aggregation factor of 1.[#684] by Justin Fain.</li>
<li><code>project</code> crashed when erroneously projecting raster data from one celestial body to another [#688] by Mike Sumner</li>
<li>you can now set a color table with a two column (value, ID) data.frame</li>
<li>categorical rasters can now be updated more easily [#667] by Alex Ilich</li>
<li>more control over matching values with colors when using <code>plot</code>. [#673] by Jakub Nowosad.</li>
<li>SpatVector attributes can now also be a factor, date, or POSIXct. [#697] by Grant Williamson</li>
<li>improved handling of missing values in <code>extract(method="bilinear")</code>. [#693] by swooping-magpie</li>
</ul>
</section>
<section id="new-19" class="level2">
<h2 class="anchored" data-anchor-id="new-19">new</h2>
<ul>
<li>argument <code>as.raster</code> to <code>unique&lt;SpatRaster&gt;</code> to create a categorical raster with the unique combinations in the layers of the input raster. The default for argument <code>na.rm</code> was changed to <code>FALSE</code></li>
<li><code>sort&lt;SpatRaster&gt;</code> to sort cell values across layers.</li>
<li><code>has.colors</code> and <code>has.RGB</code> for SpatRaster</li>
<li><code>cover</code> can now combine categorical rasters</li>
<li><code>concats</code> to combine the levels of two SpatRaster into new categories [#663] by Alex Ilich</li>
<li><code>zonal&lt;SpatVector,SpatVector&gt;</code> method to aggregate SpatVector attributes by polygons</li>
</ul>
</section>
</section>
<section id="version-1.5-34" class="level1">
<h1>version 1.5-34</h1>
<p>Released 2022-06-09</p>
<section id="bug-fixes-22" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-22">bug fixes</h2>
<ul>
<li>“flipped” rasters were not always handled well. [#546] by Dan Baston</li>
<li>better reading of GTiff with subdatsets. [#601] by Kyle Doherty</li>
<li>better handling of multi-layer categorical rasters and <code>extract</code>. [#580] by André M. Bellvé</li>
<li><code>weighted.mean</code> did not adjust the weights if there were <code>NA</code>s in the values. [#574] by Lars Dalby</li>
<li>bug in masking. [#552] reported by Márcia Barbosa and [565] by Jakub Nowosad.</li>
<li>fixed <code>stretch</code> option in <code>plotRGB</code> [#550] by Agustin Lobo</li>
<li>unwrap of a SpatRaster failed with a crs including a “’”. [#602] by Jean Romain.</li>
<li><code>spatSample</code> with <code>cells=TRUE</code> failed for planar data [#544] by Benjamin Misiuk</li>
<li><code>compareGeom(x, y, stopOnError=FALSE)</code> did not remove the error messages stored in <code>x</code> leading to unexpected warnings later on. [#568] by David Hofmann.</li>
</ul>
</section>
<section id="enhancements-20" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-20">enhancements</h2>
<ul>
<li>Using &amp; or | with SpatRasters now returns a boolean SpatRaster. [#594] by Dan Baston</li>
<li>SpatVector now supports logical values. [#593] by Derek Friend</li>
<li>Attempt to create SpatRaster with an invalid number of rows now gives an error. [#544] by Dan Baston</li>
<li><code>layerCor</code> does not create temp files anymore. [#551] by Christine Anderson</li>
<li>not using the same iterator symbols in nested loops to avoid warnings on the Intel compiler. [#573] by Gareth Davies.</li>
</ul>
</section>
<section id="new-20" class="level2">
<h2 class="anchored" data-anchor-id="new-20">new</h2>
<ul>
<li>new arguments <code>res</code> and <code>origin</code> to <code>project&lt;SpatRaster&gt;</code> method. [#596] by Alex Ilich</li>
<li>new argument <code>inside=TRUE</code> to <code>centroids</code> to get a centroid-like point that is guaranteed to be on the geometry (“point on surface”). [#588] by Márcia Barbosa</li>
<li>new argument <code>keepgeom=FALSE</code> to <code>vect&lt;data.frame&gt;</code> that allows setting (keeping) the geometry as an attribute. [#586] by Márcia Barbosa</li>
<li><code>saveRDS</code> and <code>serialize</code> methods for SpatRaster and SpatVector. [#549] by Andrei Mîrț</li>
<li><code>xFromCol</code> and <code>yFromCol</code> now have a <code>&lt;SpatRaster,missing&gt;</code> method. [#583] by Michael Sumner.</li>
<li><code>svc&lt;sf&gt;</code> method to deal with GeometryCollection types. [#585] by Sarah Endicott</li>
<li><code>as.points&lt;SpatRaster&gt;</code> and <code>as.polygons&lt;SpatRaster&gt;</code> have a new argument <code>na.all=FALSE</code> that affects the interpretation of <code>na.rm</code>. [#548] by Jean-Luc Dupouey.</li>
<li><code>setGDALconfig</code> and <code>getGDALconfig</code> to set GDAL configuration options. [#608] by Erik Bolch.</li>
<li>new argument <code>circular</code> to <code>rapp</code> to allow the start to be after the end (for if layers represent days of the year)</li>
<li>new method <code>costDistance&lt;SpatRaster&gt;</code></li>
<li>new methods <code>where.min</code> and <code>where.max</code> for <code>SpatRaster</code> to get the cell numbers for the extreme values in a SpatRaster.</li>
<li>new method <code>emptyGeoms&lt;SpatVector&gt;</code> to get the indices of empty (null) geometries</li>
<li>new method <code>rasterizeGeom</code> to rasterize the geometry count or the area of (small) polygons or the length of lines.</li>
<li>new method <code>not.na</code> for <code>SpatRaster</code> which is a shortcut for <code>!is.na(x)</code>.</li>
<li><code>as.list</code> implemented for <code>&lt;SpatRasterDataset&gt;</code>.</li>
<li><code>sources</code> implemented for <code>&lt;SpatRasterDataset&gt;</code>, <code>&lt;SpatVector&gt;</code> and <code>&lt;SpatVectorProxy&gt;</code> [#638] by Andrew Gene Brown</li>
</ul>
</section>
<section id="name-changes-2" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-2">name changes</h2>
<ul>
<li>delauny -&gt; delaunay [#627] by Derek Friend</li>
</ul>
</section>
</section>
<section id="version-1.5-21" class="level1">
<h1>version 1.5-21</h1>
<p>Released 2022-02-17</p>
<ul>
<li><code>writeVector</code> and <code>vect</code> now work with GPGK if the path has non-ascii characters [#518]</li>
<li>The results of <code>predict</code> with <code>cores &gt; 1</code> and more than one output variable were garbled</li>
<li><code>zonal</code> dropped category names when using an external (R) function [#527] by Jakub Nowosad</li>
<li>focal/focalCpp showed strange patterns when the window size was larger than the block size [#519] by Alex Ilich</li>
<li>using <code>xy=TRUE</code> in <code>as.data.frame</code> normalized the names [#538] by Kodi Arfer</li>
<li>new argument <code>options</code> to <code>vrt</code> [#629] by Monika Tomaszewska.</li>
</ul>
<section id="enhancements-21" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-21">enhancements</h2>
<ul>
<li><code>makeTiles</code> has new arguments <code>extend</code> and <code>na.rm</code> [#520] by by L. Dalby</li>
<li><code>project&lt;SpatRaster&gt;</code> now uses nearest neighbor as default method for RGB rasters</li>
<li>new argument <code>na.rm=TRUE</code> to <code>unique</code>. [#561] by Matthieu Stigler</li>
</ul>
</section>
</section>
<section id="version-1.5-17" class="level1">
<h1>version 1.5-17</h1>
<p>Released 2022-01-30</p>
<section id="bug-fixes-23" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-23">bug fixes</h2>
<ul>
<li><code>app&lt;SpatRasterDataset&gt;</code> ignored the filename. [#498] by jszhao</li>
<li><code>vect&lt;data.frame&gt;</code> failed silently if xy coordinates were integers [#496] by Márcia Barbosa</li>
<li>The output of <code>aggregate&lt;SpatRaster&gt;</code> was malformed when <code>nrow(x) %% fact != 0</code>. [#492] by Jean-François Bourdon</li>
<li>Integer <code>NA</code>s in SpatVector attributes where only recognized on Windows [#491] by Márcia Barbosa</li>
<li><code>plot&lt;SpatVector&gt;</code> failed when using a character variable with many unique values. [#489] by Márcia Barbosa</li>
<li><code>rotate</code> failed on large files. Reported by Ujjawal Singh</li>
<li>writing raster files with a color table could lead to a crash [#501] by Kodi Arfer</li>
<li><code>crds</code> replicated the coordinates [#504] by Murray Efford</li>
<li><code>as.data.frame&lt;SpatRaster&gt;</code> returned integers if the file stored values as integers, even if there was a scale/offset that creates decimal numbers [#509] by Kodi Arfer</li>
<li><code>project</code> opened the input raster file in read/write mode instead of read mode. That did not work with files that cannot be updated.</li>
</ul>
</section>
<section id="enhancements-22" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-22">enhancements</h2>
<ul>
<li><code>distance</code>, <code>gridDistance</code>, <code>direction</code> and <code>patches</code> now process all layers of the input SpatRaster. [#503] by Chris Haak</li>
<li>consistent copy-on-modify behavior in <code>()&lt;-</code> methods. in-place updating available with <code>set.</code> methods such as <code>set.names</code> and <code>set.values</code>. [#493] by Jean Romain and [#511] by Bryan Fuentes</li>
<li>much faster writing of GPGK vector data by using a single transaction (following sf) [#460] by Krzysztof Dyba</li>
<li><code>aggregate&lt;SpatRaster&gt;</code> now accepts functions that return more than one value per aggregated cell</li>
<li><code>writeVector</code> has new argument <code>insert</code> to add a layer to an existing file (e.g.&nbsp;GPKG).</li>
</ul>
</section>
<section id="new-21" class="level2">
<h2 class="anchored" data-anchor-id="new-21">new</h2>
<ul>
<li>new option <code>method="weights"</code> for <code>spatSample&lt;SpatRaster&gt;</code></li>
<li>new <code>mask&lt;SpatVector,SpatVector&gt;</code> method to select intersecting geometries</li>
<li>new method <code>is.related</code></li>
<li><code>values&lt;SpatRaster&gt;</code> has new option <code>na.rm=TRUE</code>. [#490] by Henk Harmsen</li>
<li>new class <code>SpatVectorProxy</code> to provide access to large vector databases that cannot or should not be read into memory in its entirety.</li>
<li>new argument <code>proxy=FALSE</code> to <code>vect</code> to create a SpatVectorProxy object</li>
<li>new method <code>query&lt;SpatVectorProxy&gt;</code> to extract parts of a SpatVectorProxy</li>
<li>new method <code>vector_layers</code> that returns, and can delete, vector format layers from a database/file such as GPKG</li>
</ul>
</section>
<section id="name-changes-3" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-3">name changes</h2>
<p>To avoid name clashes with tidyverse</p>
<ul>
<li>arrow -&gt; north</li>
<li>src -&gt; sprc</li>
<li>simplify -&gt; simplifyGeom</li>
</ul>
<p>For consistency</p>
<ul>
<li>setCats -&gt; set.cats</li>
</ul>
</section>
</section>
<section id="version-1.5-12" class="level1">
<h1>version 1.5-12</h1>
<p>Released 2022-01-13</p>
<section id="bug-fixes-24" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-24">bug fixes</h2>
<ul>
<li><code>setValues</code> and <code>init</code> failed (or even crashed R) when using a single value on a largish raster. [#414]</li>
<li>conversion from <code>sfc</code> to <code>SpatVector</code> lost the crs. [#415] by Jean-Luc Dupouey</li>
<li><code>buffer</code> on a SpatRaster with no values caused a crash [#416] by Sebastian Brinkmann</li>
<li><code>writeVector</code> now assumes “traditional GIS order” (long/lat) if the CRS specifies lat/long. [#333]( by Agustin Lobo</li>
<li>argument <code>main</code> was ignored in <code>density</code> when using a single layer SpatRaster [#424] by dvictori</li>
<li>Summary type math functions such as <code>min</code> and <code>mean</code>, when used with multiple SpatRasters and numbers, ignored additional SpatRasters [#426] by Zhuonan Wang</li>
<li>names are now conserved when creating a SpatRaster from a RasterStack that points to file(s) [#430] by Dan Baston</li>
<li><code>classify</code> with <code>right=FALSE</code> ignored <code>include.lowest=TRUE</code> [#442] by Alex Ilich</li>
<li><code>patches</code> now combines patches that connect across the data line [#366] by Hirscht</li>
<li><code>patches(directions=8)</code> now connects in NE/SW direction [#451] by Jean-François Bourdon.</li>
<li><code>centroids</code> now considers cases where SpatVector parts are nearest to each other when crossing the date line instead of the zero-meridian [#366] by Hirscht</li>
<li><code>terrain</code> created empty (<code>NA</code>) rows between chunks used for processing large rasters. [#453] by Robert Ritson.</li>
<li><code>inset</code> did not draw the “box” correctly. [#457] by Márcia Barbosa</li>
<li><code>as.lines</code> now works with a points SpatVector [#464] by Márcia Barbosa</li>
</ul>
</section>
<section id="enhancements-23" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-23">enhancements</h2>
<ul>
<li><code>values(x)&lt;-</code> now accepts (hex coded) colors as values</li>
<li><code>focal</code> now wraps around the dateline like raster::focal [#242] by Alexander Marbler</li>
<li><code>aggregate</code> now does not show a progress bar in all cases [#249] by Lachlan</li>
<li><code>as.data.frame&lt;SpatRaster&gt; or &lt;SpatVector&gt;</code> are now also implemented as S3 methods to assure correct dispatch by other S3 methods such as <code>data.table::as.data.table</code>. See [#284] by Patrick Schratz</li>
<li><code>crs</code> now shows the correct authority if it is not EPSG. [#419] by Matthew Williamson</li>
<li>It now possible to add a SpatRaster to an empty SpatRaster (with no values), even if it has a different geometry, ignoring the empty SpatRaster [#421] by Alex Ilich.</li>
<li><code>rast&lt;filename&gt;</code> has a new argument <code>lyrs</code> to subset the layers and open the file in one step.</li>
<li><code>rast&lt;array&gt;</code> now has a crs and extent argument. [#439] by RS-eco</li>
<li><code>type="xyz"</code> is now default in <code>rast&lt;data.frame&gt;</code>. [#438] by RS-eco</li>
<li><code>classify</code> has a new argument <code>brackets</code> to show if a side of an interval is open or closed.</li>
<li>further support for categorical data in <code>freq</code> and <code>as.data.frame</code>. [#441] ngould7</li>
<li>speed up in processing of multi-layer in memory data. [#437] by Krzysztof Dyba</li>
<li><code>vect&lt;matrix&gt;</code> and <code>vect&lt;data.frame&gt;</code> are now much faster. [#413] by BastienFR<br>
</li>
<li><code>extract</code> with points provided as a matrix or cell numbers is not much faster. [#341]</li>
<li><code>focal</code> has a new argument <code>na.policy</code> that can be set to one of “all” (default), “only” or “omit”. argument <code>na.only</code> has been removed, as you can now use <code>na.policy="only"</code></li>
<li><code>inset</code> argument <code>border</code> changed to <code>perimeter</code> to allow passing <code>border</code> on to <code>plot&lt;Spat*&gt;</code>. [#456] by Márcia Barbosa</li>
<li>The compile-time and run-time versions of GEOS are now compared and a warning is given if they are not the same. [#459] by Edzer Pebesma</li>
<li>it is now possible to add sub-datasets to GPKG and GTiff files. [#300] by gtitov</li>
<li>general option <code>memfrac</code> can now be set to zero (in stead of not lower than 0.1). [#476] by Matt Strimas-Mackey</li>
<li>new argument <code>allowGaps</code> in <code>patches</code> to disallow gaps between patch IDs. See [#478] by Dunbar Carpenter.</li>
</ul>
</section>
<section id="new-22" class="level2">
<h2 class="anchored" data-anchor-id="new-22">new</h2>
<ul>
<li>timestamps and units are now saved to an auxiliary file (filename.aux.json) for all raster formats except NetCDF when using writeCDF (because in that case they are stored in the netcdf file)</li>
<li>new method <code>mergeTime</code> to combine multiple rasters, perhaps partly overlapping in time, into a single time series</li>
<li>new method <code>fillTime</code> that can add empty layers in between existing layers to assure that the time step between layers is constant</li>
<li>new method <code>approximate</code> to fill in missing values by cell across layers</li>
<li>new methods <code>is.bool</code> and <code>as.bool</code> for SpatRaster and explicit recognition of Boolean raster data in various places (e.g., extract, plot)</li>
<li>new methods <code>is.int</code> and <code>as.int</code> for SpatRaster.</li>
<li>when assigning integer values to a SpatRaster, or when reading an integer file, the corresponding layers are now classified as being of integer type [#446] by L. Dalby</li>
<li>new method <code>layerCor</code> (like <code>raster::layerStats</code>). [#420] by Alex Ilich</li>
<li>new method <code>focalCor</code> (like <code>raster::corLocal</code>). [#427] by Zhuonan Wang</li>
<li>new method <code>all.equal</code> for <code>SpatRaster</code>. See [#428] by Dongdong Kong</li>
<li>new method <code>math</code> for <code>SpatRaster</code> that implements the Math-generic methods <em>and</em> accepts a filename</li>
<li>new method <code>sds&lt;array&gt;</code></li>
<li>new method <code>rasterize&lt;matrix&gt;</code>, see [#413] by BastienFR<br>
</li>
<li>new method <code>colorize</code> to transform color representations<br>
</li>
<li>new method <code>arrow</code> to draw a (North) arrow on a map. [#461] by Márcia Barbosa</li>
<li>new method <code>densify</code> to insert nodes between existing nodes of a line or polygon SpatVector</li>
<li>new method <code>direction</code> for SpatRaster. [#462] by Márcia Barbosa</li>
<li>new method <code>focal3D</code> to compute focal values for a three-dimensional (row, column, layer) window</li>
<li>new function <code>makeVRT</code> to create a vrt file for a file that needs a header to be read.</li>
<li>new option <code>method="stratified"</code> for <code>spatSample&lt;SpatRaster&gt;</code>. [#470] by Michael Mahoney</li>
<li>new general option <code>memmax</code> to cap the amount of RAM that terra can be used in raster processing [#476] by Matt Strimas-Mackey</li>
<li>new method <code>gridDistance</code> to compute distances traversing a raster, perhaps with obstacles. [#477] by Márcia Barbosa</li>
</ul>
</section>
</section>
<section id="version-1.4-22" class="level1">
<h1>version 1.4-22</h1>
<p>Released 2021-11-24</p>
<section id="changes" class="level2">
<h2 class="anchored" data-anchor-id="changes">changes</h2>
<ul>
<li><code>focal</code> now has ellipses (<code>...</code>) to allow for providing additional arguments to <code>fun</code>. For this reason it does not have a <code>na.rm</code> argument anymore as that can be supplied via the ellipses. In practice this means that the default will be <code>na.rm=FALSE</code> for the standard functions such as <code>mean</code> and <code>sum</code>.</li>
</ul>
</section>
<section id="bug-fixes-25" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-25">bug fixes</h2>
<ul>
<li><code>app</code> grossly overestimated RAM needed, slowing it down. Reported by Jerry Nelson</li>
<li><code>terra</code> now installs, again, with older versions of GEOS [#406] by fparyani</li>
<li><code>terra</code> did not install with Clang on CRAN/OSX due to using C++13 idiom.</li>
</ul>
</section>
<section id="enhancements-24" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-24">enhancements</h2>
<ul>
<li><code>lapp</code> and <code>tapp</code> now have a <code>cores</code> argument (as do <code>app</code> and <code>predict</code>). Suggested by Dongdong Kong [#365]</li>
<li><code>focal</code> now also works with a function that returns multiple values. See [#318] by Alex Ilich.</li>
<li><code>focal</code> can now process multiple layers in one step.</li>
<li>expanded support for conversion from <code>stars</code> objects [#220] by Jakub Nowosad</li>
</ul>
</section>
<section id="new-23" class="level2">
<h2 class="anchored" data-anchor-id="new-23">new</h2>
<ul>
<li><code>focalCpp</code> takes a C++ function that iterates over cells to speed up computation by avoiding <code>apply</code> (see [#318] by Alex Ilich).</li>
<li><code>focalReg</code> for focal OLS regression models between layers</li>
</ul>
</section>
</section>
<section id="version-1.4-20" class="level1">
<h1>version 1.4-20</h1>
<p>Released 2021-11-16</p>
<section id="bug-fixes-26" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-26">bug fixes</h2>
<ul>
<li><code>terra</code> did not install with versions of GDAL below 3 [#402] by Alex Ilich.</li>
<li><code>distance</code> between two SpatVectors or matrices with <code>pairwise=FALSE</code> returned a matrix that was filled by column instead of by row [#403] by Paul Smith</li>
</ul>
</section>
</section>
<section id="version-1.4-19" class="level1">
<h1>version 1.4-19</h1>
<p>Released 2021-11-15</p>
<section id="bug-fixes-27" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-27">bug fixes</h2>
<ul>
<li><code>rast</code> with some NetCDF files failed because of bad parsing of dates. [#361] by Juan Carlos Zamora-Pereira</li>
<li><code>distance&lt;SpatRaster&gt;</code> with lon/lat data was not correct. [#368] by Greg Schmidt</li>
<li><code>as.polygons&lt;SpatRaster&gt;</code> failed with a SpatRaster and a categorical layer that is not the first layer. [#370] by Patrick Schratz</li>
<li>The filename argument in <code>rasterize</code> was not ignored, also causing errors when writing to temporary files. [#377] by Robbie Price</li>
<li><code>rast&lt;character&gt;</code> crashed if the sds was an empty character string. [#381] by Dan Baston</li>
<li><code>plot&lt;SpatVector&gt;</code> now responds to the <code>range</code> argument [#385] by Márcia Barbosa</li>
<li><code>zonal</code> failed for user-defined functions. [#393] by mqueinnec</li>
</ul>
</section>
<section id="new-24" class="level2">
<h2 class="anchored" data-anchor-id="new-24">new</h2>
<ul>
<li>new method <code>selectHighest</code> to select n cell values with the highest or lowest values.</li>
<li>new method <code>vect&lt;list&gt;</code> to append SpatVectors (faster than <code>do.call(rbind, x)</code>)</li>
<li>new argument <code>align=FALSE</code> to <code>project</code> to align to the template SpatRaster but ignore the resolution</li>
<li>new method <code>gdalCache</code> to set the GDAL cache size, contributed by Dan Baston [#387]</li>
<li>new method <code>fileBlocksize</code></li>
<li>new argument <code>options</code> to <code>writeVector</code> to pass layer creation options to GDAL</li>
<li>new SpatVector topology methods <code>mergeLines</code>, <code>snap</code>, <code>makeNodes</code>, <code>removeDupNodes</code>, <code>gaps</code>, <code>simplify</code></li>
<li>new SpatVector characterization methods <code>width</code> and <code>clearance</code></li>
</ul>
</section>
<section id="enhancements-25" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-25">enhancements</h2>
<ul>
<li><code>terra</code> now installs with older versions of GEOS [#363]</li>
<li><code>terra</code> now installs on CentOS 7 with GDAL 2.1.4 and a C++ compiler that does not support std::regexp. [#384] by Ariel Paulson</li>
</ul>
</section>
</section>
<section id="version-1.4-11" class="level1">
<h1>version 1.4-11</h1>
<p>Released 2021-10-11</p>
<section id="enhancements-26" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-26">enhancements</h2>
<ul>
<li>the definition of <code>setValues</code> now has two arguments (<code>x</code> and <code>values</code>), just like <code>raster</code> had; to avoid reverse dependency problems with <code>raster</code></li>
</ul>
</section>
</section>
<section id="version-1.4-9" class="level1">
<h1>version 1.4-9</h1>
<p>Released 2021-10-07</p>
<section id="name-changes-4" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-4">name changes</h2>
<p>To avoid name conflicts with <code>sp</code> (via <code>raster</code>) <code>disaggregate</code> is now called <code>disagg</code> and <code>bbox,SpatRaster</code> and <code>bbox&lt;SpatVector&gt;</code> have been removed (but could be resurrected in <code>raster</code> or under another name).</p>
</section>
<section id="enhancements-27" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-27">enhancements</h2>
<ul>
<li><code>project</code> and <code>resample</code> now choose the resampling method based on the first layer, using “near” for categorical data. Thanks to Matthew Lewis [#355]</li>
</ul>
</section>
<section id="bug-fixes-28" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-28">bug fixes</h2>
<ul>
<li><code>hist</code> failed with small samples. Issue [#356] by Martin Queinnec</li>
</ul>
</section>
</section>
<section id="version-1.4-7" class="level1">
<h1>version 1.4-7</h1>
<p>Released 2021-10-05</p>
<section id="note" class="level2">
<h2 class="anchored" data-anchor-id="note">note</h2>
<p><code>terra</code> no longer depends on <code>raster</code>. To avoid name clashes between these two packages, and to allow replacing methods from <code>rgeos</code> and <code>rgdal</code> in <code>raster</code>, <code>raster</code> now depends on <code>terra</code> instead.</p>
</section>
<section id="enhancements-28" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-28">enhancements</h2>
<ul>
<li><code>freq</code> has a new argument <code>usenames</code>. See issue [#309] by Bappa Das</li>
<li><code>rast&lt;character&gt;</code> has a new argument <code>opts</code> that can be used to pass GDAL open options. See issue [#314]</li>
<li><code>rast&lt;SpatRaster&gt;</code> now takes arguments <code>names</code> and <code>vals</code>. See issue [#323] by Dongdong Kong</li>
<li><code>crs&lt;-</code> now warns if an unsupported datum is used. See issue [#317]</li>
<li><code>spatSample</code> now returns factor values if a SpatRaster layer is.factor except when using <code>as.df=FALSE</code></li>
<li>new method <code>origin&lt;-</code> to set the origin of a SpatRaster. See issue [#326] by Jakub Nowosad</li>
<li><code>crs</code> has a new argument <code>parse</code>. See [#344]</li>
<li><code>plot&lt;SpatRaster,missing&gt;</code> has a new argument <code>reset=FALSE</code> that allows resetting the par()$mar parameters after plotting. See issue [#340] by Derek Friend</li>
<li><code>crds</code> has a new argument <code>na.rm</code>. See [#338] by Kodi Arfer</li>
<li><code>show(Spat*)</code> now prints the name and EPSG code of a crs if available. See [#317] by Jakub Nowosad</li>
</ul>
</section>
<section id="bug-fixes-29" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-29">bug fixes</h2>
<ul>
<li><code>plotRGB</code> failed if there were <code>NA</code>s. Issue [#308] by Jakub Nowosad</li>
<li><code>writeVector</code> crashed R when used with a SpatVector with no geometries. Reported by Timothy White in issue [#319]</li>
<li><code>summary&lt;SpatRaster&gt;</code> now returns counts for the classes (instead of a numerical summary of the indices) [#324] by Jakub Nowosad</li>
<li><code>tapp</code> with a character index now returns a SpatRaster with the correct names [#345] by Stuart Brown</li>
<li><code>rasterize</code> with a character variable now adds the ID column to the categories [#337] by Tate Brasel</li>
<li><code>cellSize</code> now masks values in all cases (when requested with <code>mask=TRUE</code>). Issue [#339] by Jean-Luc Dupouey</li>
<li><code>buffer&lt;SpatVector&gt;</code> no longer treats lines like polygons [#332] by Márcia Barbosa</li>
<li><code>plot</code> now passes the layer index to <code>fun</code> [#310] by Ben Tupper</li>
<li>the <code>to_id</code> in <code>nearest</code> was sometimes wrong. See [#328] by Shawn Ligocki</li>
<li>better support for ESRI value attribute tables (VAT). See this <a href="https://stackoverflow.com/q/69385928/635245">SO question</a></li>
<li><code>focal</code> did not reset initial values for NA cells when processing chunks. [#312] by Jeffrey Evans</li>
<li><code>focal</code> could run out of memory when using a large window and user-defined function, and was inexact at the chunk boundary [#347]</li>
<li><code>zonal</code> with <code>as.raster=TRUE</code> failed for categorical SpatRasters [#348] by Jakub Nowosad</li>
</ul>
</section>
</section>
<section id="version-1.3-22" class="level1">
<h1>version 1.3-22</h1>
<p>Released 2021-08-20</p>
<section id="enhancements-29" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-29">enhancements</h2>
<ul>
<li>if <code>time(x) &lt;- d</code> is set with a <code>Date</code> class object, <code>time(x)</code> now returns a <code>Date</code> object instead of a <code>POSIXct</code> object. Issue [#256] by Mauricio Zambrano-Bigiarini</li>
<li>The UTF-8 encoding of character attributes of a SpatVector is now declared such that they display correctly in R. See issue [#258] by AGeographer. Also implemented for names in both SpatVector and SpatRaster</li>
<li><code>rast&lt;data.frame&gt;</code> method to avoid confusion with the <code>matrix</code> and <code>list</code> methods in response to a <a href="https://stackoverflow.com/q/68133958/635245">SO question</a> by Stackbeans</li>
<li>the extreme values used to represent NA where not as intended (one or two lower) for INT2U and INT4U. Reported by Jean-Luc Dupouey on <a href="https://stackoverflow.com/q/68216362/635245">stackoverflow</a></li>
<li><code>writeCDF</code> now also writes the time dimensions if there is only one time-step. See this <a href="https://stackoverflow.com/a/68227180/635245">SO question</a></li>
<li><code>vect&lt;character&gt;</code> (filename) now has argument <code>layer</code> to select a layer from a multi-layer file / database, and arguments <code>query</code>, <code>extent</code> and <code>filter</code> for reading a subset</li>
<li><code>subst</code> can now create multiple output layers See [issue 276] by Agustin Lobo</li>
<li><code>classify</code> can now create different multiple output layers See [issue 276] by Agustin Lobo</li>
<li>Argument <code>alpha</code> of <code>plot&lt;SpatRaster&gt;</code> can now be a <code>SpatRaster</code>. See this <a href="https://stackoverflow.com/q/68736432/635245">SO question</a> by James McCarthy</li>
</ul>
</section>
<section id="bug-fixes-30" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-30">bug fixes</h2>
<ul>
<li>The <code>filename</code> and <code>overwrite</code> arguments were ignored in <code>rasterize</code></li>
<li>gdal options are now also honored for create-copy drivers [#260]</li>
<li>buffer for lonlat now works better at the world’s “edges” [#261]</li>
<li>scale/offset were ignored by <code>project</code>. Reported by Fabian Fischer</li>
<li><code>rasterize&lt;SpatRaster,SpatVector&gt;</code> with <code>inverse=TRUE</code> crashed the R session. Issue [#264] by Jean-Luc Dupouey</li>
<li>The output of <code>merge</code> and <code>mosaic</code> was not correct for large rasters (only the first rows were used). Reported by Zavud Baghirov in [#271]</li>
<li><code>as.points,SpatRaster</code> did not remove <code>NA</code>’s correctly and shifted values. Issues [#269] and [#273] by Julian Hagenauer</li>
<li><code>rast&lt;matrix&gt;</code> rotated values when using an equal-sided matrix [#274] by Jakub Nowosad</li>
<li>the number of rows and columns were reversed when using <code>project</code> with a crs argument. [#283] by Timothée Giraud</li>
<li>In <code>classify</code>, argument <code>right</code> had TRUE and FALSE reversed.</li>
<li><code>terrain</code> had edge effects [#303] by Andrew Gene Brown.</li>
<li><code>terrain</code> can now compute multiple variables at once [#286] by Žan Kuralt</li>
<li><code>wrap&lt;SpatRaster&gt;</code> changed factors into numeric [#302] by Patrick Schratz</li>
<li><code>writeVector</code> failed with “FlatGeobuf” (and probably other formats as well) for not using a proper MultiPolygon [#299] by L Dalby</li>
<li>regular sampling of polygons with <code>spatSample</code> is now much more regular [#289] by Jakub Nowosad</li>
</ul>
</section>
</section>
<section id="version-1.3-4" class="level1">
<h1>version 1.3-4</h1>
<p>Released 2021-06-20</p>
<section id="new-25" class="level2">
<h2 class="anchored" data-anchor-id="new-25">new</h2>
<ul>
<li><code>na.omit&lt;SpatVector&gt;</code> to remove empty geometries and/or attribute records that have an <code>NA</code></li>
<li>new method <code>src</code> to create a <code>SpatRasterCollection</code> (a loose collection of tiles).</li>
<li><code>merge</code> and <code>mosaic</code> now have methods for a <code>SpatRasterCollection</code>. To avoid the (inefficient) use of <code>do.call</code>. #210 by Matthew Talluto.</li>
<li><code>activeCat</code> and <code>activeCat&lt;-</code> to get or set the “active” category if there are multiple categories (raster attributes)</li>
<li><code>as.numeric</code> and <code>catalyze</code> to transfer categories to numeric cell values</li>
<li>summarize methods such as <code>range</code> and <code>mean</code> for (the attributes of) a <code>SpatVector</code></li>
<li>new method <code>shade</code>, to compute hill shading</li>
</ul>
</section>
<section id="enhancements-30" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-30">enhancements</h2>
<ul>
<li>additional arguments (such as <code>na.rm</code>) are now used by <code>rasterize</code> with point geometries. #209 by Jakub Nowosad</li>
<li>improved handling (and documentation) of <code>gstat</code> models by <code>interpolate</code>. #208 by Jakub Nowosad</li>
<li>new argument <code>cpkgs</code> to <code>predict</code> to list the packages that need to be exported to the cores if argument <code>cores</code> is larger than one. <code>?predict</code> now shows different approaches to parallelize <code>predict</code> (based on examples in issue. #178 by by Matthew Coghill.</li>
<li><code>freq</code> now returns labels for categorical layers</li>
<li><code>adjacent</code> now has a <code>pairs</code> argument. #239 by Kenneth Blake Vernon</li>
<li><code>adjacent</code> now also takes a matrix to specify adjacent cells</li>
<li><code>mean</code> and other summarize methods now take a <code>filename</code> argument and disallow non-recognized named arguments. #238 by Jessica Nephin</li>
<li>The raster attribute table of ESRI-GRID integer data, or from an ESRI <code>vat.dbf</code> file is now ignored if it only has the counts of the values. #234 by Jullee</li>
<li>time attributes are no longer lost when doing raster operations. #246 by Mauricio Zambrano-Bigiarini</li>
<li>resample (and project) no longer ignore <code>gdal=""</code> write options and use BIGTIFF if necessary (suggested by Ani Ghosh)</li>
<li>new argument <code>layer</code> in the <code>extract-SpatRaster,SpatVector</code> method to extract values for a single layers specified for each geometry (see this <a href="https://gis.stackexchange.com/a/401591/8993">question</a>).</li>
</ul>
</section>
<section id="bug-fixes-31" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-31">bug fixes</h2>
<ul>
<li>better handling of paths with non-ASCII characters (e.g., Chinese) for GeoTiff but still fails for NetCDF. [#233] by Dongdong Kong</li>
<li><code>extract</code> with points and <code>cells=TRUE</code> or <code>xy=TRUE</code> gave garbled output</li>
<li><code>as.character&lt;SpatRaster&gt;</code> (called by <code>wrap</code>) did not capture the layer names. [#213] by Pascal Title</li>
<li><code>focal</code> mirrored the weight matrix, thus affecting the results when using an asymmetrical weight matrix. Reported by Sebastiano Trevisani</li>
<li><code>terra::terraOptions</code> now works without attaching the package. [#229] by Karl Dunkle Werner</li>
<li><code>app</code> with <code>ncores &gt; 0</code> and a function that returns multiple layers now works. [#240] by BastienFR.</li>
<li><code>autocor</code> (local) can now handle <code>NA</code> values. [#245] by Jakub Nowosad .</li>
<li><code>mask</code> with a SpatVector and a large (out of memory) multi-layer SpatRaster only worked for the first layer. Reported by Monika Tomaszewska.</li>
</ul>
</section>
</section>
<section id="version-1.2-10" class="level1">
<h1>version 1.2-10</h1>
<p>Released 2021-05-13</p>
<section id="new-26" class="level2">
<h2 class="anchored" data-anchor-id="new-26">new</h2>
<ul>
<li><code>as.lines</code> method for SpatRaster</li>
<li><code>as.polygons</code> method for SpatVector lines</li>
<li><code>autocor&lt;numeric&gt;</code> has new methods <code>mean</code>, to compute the local mean, and <code>locmor</code>, for the local Moran’s <em>I</em></li>
<li><code>sharedPaths</code> method for SpatVector (lines and polygons)</li>
<li><code>RGB2col</code> method to reduce a three-layer RGB SpatRaster to a single layer SpatRaster with a color-table (with &lt;= 256 colors)</li>
<li><code>split</code> methods for SpatVector and SpatRaster</li>
</ul>
</section>
<section id="enhancements-31" class="level2">
<h2 class="anchored" data-anchor-id="enhancements-31">enhancements</h2>
<ul>
<li><code>rast&lt;Raster*&gt;</code> now takes the crs from the Raster object, not from the file it may point to. [#200] by Floris Vanderhaeghe</li>
<li><code>convhull</code> has a new argument <code>by=""</code> to make convex hulls for sub-sets of a SpatVector.</li>
<li>faster processing of large in memory rasters. See issue [#206] by Krzysztof Dyba.</li>
</ul>
</section>
<section id="bug-fixes-32" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-32">bug fixes</h2>
<ul>
<li><code>extract</code> with multiple layers could return a data.frame where the values were not in the correct order (by row instead of by column)</li>
<li><code>crop</code> works again with <code>sf</code> objects. [#201] by Sebastian Brinkmann</li>
<li><code>vect&lt;sf&gt;</code> now also works for lines, and should be faster</li>
<li><code>vect&lt;character&gt;</code> crashed R if a file had empty geometries. [#202] by consumere</li>
<li><code>extract(points, bilinear=TRUE, cells=TRUE)</code> now works. [#203] by fab4app</li>
<li><code>zonal</code> now works for <code>min</code> and <code>max</code>. [#207] Reported by Jakub Nowosad</li>
</ul>
</section>
<section id="name-changes-5" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-5">name changes</h2>
<p>To avoid name conflicts with the <code>spatstat</code> package</p>
<ul>
<li><code>area,SpatRaster-method(x, sum=FALSE)</code> -&gt; <code>cellSize(x)</code></li>
<li><code>area,SpatRaster/SpatVector-method(x, sum=TRUE)</code> -&gt; <code>expanse(x)</code></li>
<li><code>convexhull</code> -&gt; <code>convHull</code></li>
<li><code>perimeter</code> -&gt; <code>perim</code></li>
<li><code>tiles</code> -&gt; <code>makeTiles</code></li>
<li><code>coords</code> -&gt; <code>crds</code></li>
</ul>
</section>
</section>
<section id="version-1.2-5" class="level1">
<h1>version 1.2-5</h1>
<p>Released 2021-04-30</p>
<section id="new-27" class="level2">
<h2 class="anchored" data-anchor-id="new-27">new</h2>
<ul>
<li><code>trim</code> has a new argument <code>value</code> that allows trimming rows and columns with other values than the default <code>NA</code></li>
<li><code>rapp</code> has a new argument <code>clamp</code> that allows clamping start and end values to <code>1:nlyr(x)</code>, avoiding that all values are considered <code>NA</code></li>
<li><code>spatSample&lt;SpatRaster&gt;</code> has new arguments <code>as.points</code> and <code>values</code>. Getting values, cells and coordinates is no longer mutually exclusive. In response to [#191] by Agustin Lobo</li>
<li><code>area&lt;SpatRaster&gt;</code> has a new argument <code>mask=FALSE</code></li>
<li><code>classify</code> can now take a single number to request that many cuts</li>
<li><code>mosaic</code> and <code>merge</code> now warn and resample if rasters are not aligned</li>
<li><code>extract</code> has a new argument <code>exact</code> to get the fraction covered for each cell</li>
</ul>
</section>
<section id="bug-fixes-33" class="level2">
<h2 class="anchored" data-anchor-id="bug-fixes-33">bug fixes</h2>
<ul>
<li><code>flip(x, direction="vertical")</code> no longer reverses the order of the layers</li>
<li><code>extract</code> did not work for horizontal or vertical lines as their extent was considered invalid. Reported by Monika Tomaszewska</li>
<li><code>autocor</code> did not handle NA values [#192] by Laurence Hawker</li>
<li><code>nearest</code> now works for angular coordinates</li>
<li>The unit of <code>slope</code> in <code>terrain</code> was not correct (the tangent was returned instead of the slope), [#196] by Sven Alder</li>
<li><code>quantile</code> now works for rasters that have cells that are all <code>NA</code>. Reported by Jerry Nelson</li>
</ul>
</section>
<section id="name-changes-6" class="level2">
<h2 class="anchored" data-anchor-id="name-changes-6">name changes</h2>
<p>To avoid name conflicts with tidyverse</p>
<p>with deprecation warning:</p>
<ul>
<li>separate -&gt; segregate</li>
<li>expand -&gt; extend</li>
<li>near -&gt; nearby</li>
<li>pack -&gt; wrap</li>
</ul>
<p>without deprecation warning:</p>
<ul>
<li>transpose -&gt; trans</li>
<li>collapse -&gt; tighten</li>
<li>fill -&gt; fillHoles</li>
<li>select -&gt; sel</li>
</ul>
</section>
</section>
<section id="version-1.1-17" class="level1">
<h1>version 1.1-17</h1>
<p>Released 2021-04-14</p>
<section id="major-changes" class="level2">
<h2 class="anchored" data-anchor-id="major-changes">major changes</h2>
<ul>
<li><code>c&lt;SpatVector&gt;</code> now returns a list. <code>rbind</code> is used to append SpatVector objects</li>
<li>overhaul of handling of factors. <code>rats</code> has been removed, and <code>levels</code> and <code>cats</code> have changed</li>
</ul>
</section>
</section>
<section id="version-1.1-4" class="level1">
<h1>version 1.1-4</h1>
<ul>
<li>No news recorded for this and earlier versions</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/renatovargas/gears/blob/master/sf/terra/NEWS.md" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>